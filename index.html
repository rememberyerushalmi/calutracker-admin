<!DOCTYPE html>
<html lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CaluTracker Admin Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&amp;display=swap" rel="stylesheet">
    <style>
        *{font-family:'Inter',sans-serif;box-sizing:border-box}
        body{background:#f8fafc;margin:0;min-height:100vh}
        .sidebar{background:linear-gradient(180deg,#1e1b4b 0%,#312e81 100%);width:240px;min-height:100vh;position:fixed;left:0;top:0;z-index:50}
        .sidebar-btn{width:100%;text-align:left;padding:14px 20px;border-radius:10px;font-weight:500;font-size:14px;color:rgba(255,255,255,0.7);background:transparent;border:none;cursor:pointer;display:flex;align-items:center;gap:12px;transition:all 0.2s;margin-bottom:4px}
        .sidebar-btn:hover{background:rgba(255,255,255,0.1);color:#fff}
        .sidebar-btn.active{background:linear-gradient(135deg,#6366f1,#8b5cf6);color:#fff;box-shadow:0 4px 15px rgba(99,102,241,0.3)}
        .card{background:#fff;border-radius:16px;box-shadow:0 1px 3px rgba(0,0,0,0.05);border:1px solid #e2e8f0}
        .stat-card{background:#fff;border-radius:16px;padding:24px;cursor:pointer;transition:all 0.2s}
        .stat-card:hover{transform:translateY(-2px);box-shadow:0 8px 25px rgba(0,0,0,0.1)}
        .stat-card.green{border:2px solid #10b981}
        .stat-card.amber{border:2px solid #f59e0b}
        .stat-card.red{border:2px solid #ef4444}
        .stat-card.gray{border:2px solid #9ca3af}
        .btn{padding:10px 18px;border-radius:10px;font-weight:600;font-size:14px;cursor:pointer;border:none;transition:all 0.15s;display:inline-flex;align-items:center;gap:8px}
        .btn-primary{background:linear-gradient(135deg,#6366f1,#8b5cf6);color:#fff}
        .btn-primary:hover{opacity:0.9;box-shadow:0 4px 12px rgba(99,102,241,0.3)}
        .btn-secondary{background:#f1f5f9;color:#475569}
        .btn-secondary:hover{background:#e2e8f0}
        .btn-danger{background:#fee2e2;color:#dc2626}
        .btn-success{background:#dcfce7;color:#16a34a}
        .input{width:100%;padding:12px 16px;border:2px solid #e2e8f0;border-radius:10px;font-size:14px;outline:none;transition:all 0.15s}
        .input:focus{border-color:#6366f1;box-shadow:0 0 0 3px rgba(99,102,241,0.1)}
        .badge{padding:4px 12px;border-radius:6px;font-size:11px;font-weight:700;text-transform:uppercase}
        .progress-bar{height:10px;background:#e2e8f0;border-radius:10px;overflow:hidden}
        .progress-fill{height:100%;border-radius:10px;transition:width 0.5s}
        .modal-bg{position:fixed;inset:0;background:rgba(15,23,42,0.6);backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;z-index:100}
        .modal{background:#fff;border-radius:20px;max-width:700px;width:95%;box-shadow:0 25px 50px rgba(0,0,0,0.2);max-height:90vh;overflow-y:auto}
        .user-card{background:#fff;border-radius:16px;padding:20px;border:1px solid #e2e8f0;transition:all 0.2s;cursor:pointer}
        .user-card:hover{transform:translateY(-3px);box-shadow:0 12px 30px rgba(0,0,0,0.1)}
        .dropdown{position:absolute;top:100%;right:0;background:#fff;border:1px solid #e2e8f0;border-radius:12px;box-shadow:0 10px 40px rgba(0,0,0,0.15);z-index:60;min-width:200px;padding:8px}
        .dropdown-item{padding:10px 14px;border-radius:8px;cursor:pointer;font-size:14px;display:flex;align-items:center;gap:10px}
        .dropdown-item:hover{background:#f1f5f9}
        .tab-btn{padding:10px 20px;border-radius:8px;font-weight:500;font-size:14px;color:#64748b;background:transparent;border:none;cursor:pointer;transition:all 0.15s}
        .tab-btn:hover{color:#1e293b}
        .tab-btn.active{background:#fff;color:#6366f1;box-shadow:0 2px 8px rgba(0,0,0,0.08)}
        table{width:100%;border-collapse:collapse}
        th{text-align:left;padding:14px 16px;font-weight:600;color:#64748b;font-size:11px;text-transform:uppercase;letter-spacing:0.5px;background:#f8fafc}
        td{padding:14px 16px;border-top:1px solid #f1f5f9;font-size:14px}
        tr:hover td{background:#fafbfc}
        select.input{appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%236b7280' d='M6 8L1 3h10z'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 14px center;padding-right:40px}
        .msg-card{padding:16px 20px;border-radius:12px;text-align:center;min-width:100px;cursor:pointer;transition:all 0.2s}
        .msg-card:hover{transform:scale(1.05)}
        @media print{.no-print{display:none!important}body{background:#fff!important}.sidebar{display:none!important}.main-content{margin-left:0!important}}
    </style>
<style type="text/css" nonce="">
.redacted {
  color: red !important;
}</style><style type="text/css" nonce="">
.redacted {
  color: red !important;
}</style></head>
<body>
<div id="app"></div>
<script>
const API = "https://script.google.com/macros/s/AKfycbxXLGDWKANlMRHAyVpliPxgFmQmxOPISzr0J9oiHlVkI_7ESdNyTwroQhdNWkYGrIQ/exec";
const urlParams = new URLSearchParams(window.location.search);
const userPortalId = urlParams.get('user');
const isUserPortal = !!userPortalId;

let state = {
    view: isUserPortal ? 'portal' : 'dashboard',
    portalTab: 'dashboard',
    users: [],
    messages: [],
    costs: {},
    dailyTotals: [],
    stats: {},
    templates: [],
    pricing: {},
    selectedUser: userPortalId || null,
    dateFrom: new Date().toISOString().split('T')[0],
    dateTo: new Date().toISOString().split('T')[0],
    loading: true,
    showModal: null,
    modalData: null,
    expandedCard: null,
    openDropdown: null,
    messageFilter: null,
    currentTime: new Date(),
    userSearch: '',
    expandedMessage: null
};

const TIMEZONES = [
    {value:'America/New_York',label:'Eastern (New York)'},
    {value:'America/Chicago',label:'Central (Chicago)'},
    {value:'America/Denver',label:'Mountain (Denver)'},
    {value:'America/Los_Angeles',label:'Pacific (Los Angeles)'},
    {value:'America/Phoenix',label:'Arizona (Phoenix)'},
    {value:'Europe/London',label:'GMT (London)'},
    {value:'Asia/Jerusalem',label:'Israel (Jerusalem)'},
    {value:'Asia/Tokyo',label:'Japan (Tokyo)'}
];

function getTimeOfDay(ts) {
    if (!ts) return 'Unknown';
    const timePart = ts.split(' ')[1] || '';
    if (!timePart) return 'Unknown';
    const h = parseInt(timePart.split(':')[0]);
    if (h < 6) return 'Night';
    if (h < 12) return 'Morning';
    if (h < 17) return 'Afternoon';
    if (h < 21) return 'Evening';
    return 'Night';
}

// Update time every second
setInterval(() => { state.currentTime = new Date(); updateTimeDisplay(); }, 1000);

function updateTimeDisplay() {
    const el = document.getElementById('live-time');
    if (el) el.textContent = state.currentTime.toLocaleString('en-US', {weekday:'short', month:'short', day:'numeric', hour:'2-digit', minute:'2-digit', second:'2-digit'});
}

async function api(action, params = {}) {
    const url = new URL(API);
    url.searchParams.append('action', action);
    Object.entries(params).forEach(([k, v]) => v != null && url.searchParams.append(k, v));
    try { const res = await fetch(url); return await res.json(); }
    catch (e) { console.error('API Error:', e); return { success: false, error: e.message }; }
}

async function loadData() {
    state.loading = true; render();
    const results = await Promise.all([
        api('getUsers'),
        api('getStats'),
        api('getMessages', { limit: 1000 }),
        api('getCosts'),
        api('getDailyTotals', { days: 90 }),
        api('getTemplates'),
        api('getPricing')
    ]);
    if (results[0].success) state.users = results[0].users || [];
    if (results[1].success) state.stats = results[1].stats || {};
    if (results[2].success) state.messages = results[2].messages || [];
    if (results[3].success) state.costs = results[3];
    if (results[4].success) state.dailyTotals = results[4].totals || [];
    if (results[5].success) state.templates = results[5].templates || [];
    if (results[6].success) state.pricing = results[6].pricing || {};
    state.loading = false;
    render();
}

function today() { 
    const d = new Date();
    return d.getFullYear() + '-' + String(d.getMonth()+1).padStart(2,'0') + '-' + String(d.getDate()).padStart(2,'0');
}
function daysAgo(n) { 
    const d = new Date(); 
    d.setDate(d.getDate() - n); 
    return d.getFullYear() + '-' + String(d.getMonth()+1).padStart(2,'0') + '-' + String(d.getDate()).padStart(2,'0');
}
function parseDate(str) {
    if (!str) return null;
    if (str.includes('/')) { const p = str.split('/'); if (p.length === 3) return p[2]+'-'+p[0].padStart(2,'0')+'-'+p[1].padStart(2,'0'); }
    return str.split('T')[0];
}
function formatDateShort(str) { if (!str) return ''; try { return new Date(str).toLocaleDateString('en-US', { month: 'short', day: 'numeric' }); } catch { return str; } }
function ozToCups(oz) { return (oz / 8).toFixed(1); }

function getActiveToday() {
    const t = today();
    const activeIds = new Set();
    state.dailyTotals.forEach(d => {
        if (parseDate(d.date) === t && (d.calories > 0 || d.water > 0)) activeIds.add(d.userId);
    });
    state.messages.forEach(m => {
        if (parseDate(m.timestamp?.split(' ')[0]) === t) activeIds.add(m.userId);
    });
    return state.users.filter(u => activeIds.has(u.userId));
}

function getNotActiveToday() {
    const activeIds = new Set(getActiveToday().map(u => u.userId));
    return state.users.filter(u => u.status === 'active' && !activeIds.has(u.userId));
}

function getInactive2Days() {
    const twoDaysAgo = daysAgo(2);
    return state.users.filter(u => {
        if (u.status !== 'active') return false;
        const last = parseDate(u.lastActive);
        return !last || last < twoDaysAgo;
    });
}

function getPaymentFailed() {
    return state.users.filter(u => u.paymentStatus === 'failed');
}

function getMessagesInRange(userId = null, category = null) {
    return state.messages.filter(m => {
        const mDate = parseDate(m.timestamp?.split(' ')[0] || m.timestamp);
        const inRange = mDate >= state.dateFrom && mDate <= state.dateTo;
        if (!inRange) return false;
        if (userId && m.userId !== userId) return false;
        if (category && m.category !== category) return false;
        return true;
    });
}

function getTodayTotals(userId) {
    const t = today();
    const found = state.dailyTotals.find(d => parseDate(d.date) === t && d.userId === userId);
    return found || { calories: 0, water: 0, carbs: 0 };
}

function getUserTotalsInRange(userId) {
    return state.dailyTotals.filter(d => {
        if (d.userId !== userId) return false;
        const dDate = parseDate(d.date);
        return dDate >= state.dateFrom && dDate <= state.dateTo;
    });
}

function getUser(id) { return state.users.find(u => u.userId === id); }

function render() {
    const app = document.getElementById('app');
    if (state.loading) {
        app.innerHTML = '<div style="display:flex;align-items:center;justify-content:center;min-height:100vh"><div style="text-align:center"><div style="width:40px;height:40px;border:3px solid #e2e8f0;border-top-color:#6366f1;border-radius:50%;animation:spin 1s linear infinite;margin:0 auto"></div><p style="margin-top:16px;color:#64748b">Loading CaluTracker...</p></div></div><style>@keyframes spin{to{transform:rotate(360deg)}}</style>';
        return;
    }
    if (isUserPortal) {
        app.innerHTML = renderUserPortal();
    } else {
        app.innerHTML = renderAdmin();
    }
    lucide.createIcons();
    setTimeout(initCharts, 100);
    updateTimeDisplay();
}

function renderAdmin() {
    return `
    <div class="sidebar no-print">
        <div class="p-5 border-b border-white/10">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-400 to-purple-500 flex items-center justify-center">
                    <i data-lucide="flame" class="w-5 h-5 text-white"></i>
                </div>
                <div>
                    <h1 class="font-bold text-white">CaluTracker</h1>
                    <p class="text-xs text-indigo-300 font-semibold">ADMIN</p>
                </div>
            </div>
        </div>
        <nav class="p-3 space-y-1">
            <button onclick="nav('dashboard')" class="sidebar-btn ${state.view === 'dashboard' ? 'active' : ''}">
                <i data-lucide="layout-dashboard" class="w-5 h-5"></i> Dashboard
            </button>
            <button onclick="nav('users')" class="sidebar-btn ${state.view === 'users' ? 'active' : ''}">
                <i data-lucide="users" class="w-5 h-5"></i> Users
                <span class="ml-auto text-xs bg-white/20 px-2 py-0.5 rounded-full">${state.users.length}</span>
            </button>
            <button onclick="nav('messages')" class="sidebar-btn ${state.view === 'messages' ? 'active' : ''}">
                <i data-lucide="message-circle" class="w-5 h-5"></i> Messages
            </button>
            <button onclick="nav('actions')" class="sidebar-btn ${state.view === 'actions' ? 'active' : ''}">
                <i data-lucide="alert-circle" class="w-5 h-5"></i> Action Center
                ${(getPaymentFailed().length + getInactive2Days().length) > 0 ? '<span class="ml-auto text-xs bg-amber-500 text-white px-2 py-0.5 rounded-full">'+(getPaymentFailed().length + getInactive2Days().length)+'</span>' : ''}
            </button>
        </nav>
        <div class="p-3 mt-auto absolute bottom-0 left-0 right-0 border-t border-white/10">
            <div class="bg-emerald-500/20 rounded-xl p-3">
                <div class="flex items-center gap-2 text-emerald-300 text-sm font-medium">
                    <span class="w-2 h-2 bg-emerald-400 rounded-full" style="animation:pulse 2s infinite"></span>
                    Online
                </div>
            </div>
        </div>
    </div>
    <main class="ml-[240px] min-h-screen main-content">
        <header class="bg-white border-b border-slate-200 px-6 py-4 sticky top-0 z-40 no-print">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-4">
                    <h2 class="text-xl font-bold text-slate-800 capitalize">${state.view === 'userDetail' ? 'User Details' : state.view}</h2>
                    <div class="bg-indigo-50 px-4 py-2 rounded-lg">
                        <span id="live-time" class="text-indigo-700 font-medium text-sm"></span>
                    </div>
                </div>
                <div class="flex items-center gap-3">
                    <div class="flex items-center gap-2 bg-slate-100 rounded-lg p-1">
                        <input type="date" class="input py-2 px-3 w-36 text-sm" value="${state.dateFrom}" onchange="state.dateFrom=this.value;render()">
                        <span class="text-slate-400">to</span>
                        <input type="date" class="input py-2 px-3 w-36 text-sm" value="${state.dateTo}" onchange="state.dateTo=this.value;render()">
                    </div>
                    <button onclick="state.dateFrom=today();state.dateTo=today();render()" class="tab-btn ${state.dateFrom===state.dateTo && state.dateFrom===today() ? 'active' : ''}">Today</button>
                    <button onclick="state.dateFrom=daysAgo(6);state.dateTo=today();render()" class="tab-btn">7 Days</button>
                    <button onclick="state.dateFrom=daysAgo(29);state.dateTo=today();render()" class="tab-btn">30 Days</button>
                    <button onclick="loadData()" class="btn btn-secondary"><i data-lucide="refresh-cw" class="w-4 h-4"></i></button>
                </div>
            </div>
        </header>
        <div class="p-6">
            ${state.view === 'dashboard' ? renderDashboard() : ''}
            ${state.view === 'users' ? renderUsers() : ''}
            ${state.view === 'userDetail' ? renderUserDetail() : ''}
            ${state.view === 'messages' ? renderMessages() : ''}
            ${state.view === 'actions' ? renderActionCenter() : ''}
        </div>
    </main>
    ${state.showModal ? renderModal() : ''}
    <style>@keyframes pulse{0%,100%{opacity:1}50%{opacity:0.5}}</style>`;
}

function renderDashboard() {
    const activeToday = getActiveToday();
    const notActiveToday = getNotActiveToday();
    const inactive2Days = getInactive2Days();
    const paymentFailed = getPaymentFailed();
    
    const msgs = getMessagesInRange();
    const waterMsgs = msgs.filter(m => m.category === 'WATER').length;
    const calorieMsgs = msgs.filter(m => m.category === 'CALORIES').length;
    const carbMsgs = msgs.filter(m => m.category === 'CARBS').length;
    const aiMsgs = msgs.filter(m => m.category === 'AI_LOOKUP').length;
    const templateMsgs = msgs.filter(m => m.category === 'TEMPLATE').length;
    const invalidMsgs = msgs.filter(m => m.category === 'INVALID' || m.category === 'GARBAGE').length;
    const voiceMsgs = msgs.filter(m => m.type === 'VOICE').length;
    const unauthorizedMsgs = msgs.filter(m => m.category === 'UNAUTHORIZED').length;
    const totalMsgs = msgs.length;

    const totalCost = state.costs.totalSystemCost || 0;
    const avgPerUser = state.users.length > 0 ? totalCost / state.users.length : 0;

    return `
    <div class="space-y-6">
        <!-- TOP 4 STATUS CARDS WITH COLORED BORDERS -->
        <div class="grid grid-cols-4 gap-4">
            <div class="stat-card green ${state.expandedCard === 'active' ? 'ring-2 ring-emerald-500' : ''}" onclick="toggleCard('active')">
                <p class="text-sm text-slate-500 mb-2">Active Today</p>
                <p class="text-4xl font-bold text-emerald-600">${activeToday.length}</p>
                ${state.expandedCard === 'active' ? renderUserList(activeToday) : '<p class="text-xs text-slate-400 mt-2">Click to see users</p>'}
            </div>
            <div class="stat-card amber ${state.expandedCard === 'notActive' ? 'ring-2 ring-amber-500' : ''}" onclick="toggleCard('notActive')">
                <p class="text-sm text-slate-500 mb-2">Not Active Today</p>
                <p class="text-4xl font-bold text-amber-600">${notActiveToday.length}</p>
                ${state.expandedCard === 'notActive' ? renderUserList(notActiveToday) : '<p class="text-xs text-slate-400 mt-2">Click to see users</p>'}
            </div>
            <div class="stat-card red ${state.expandedCard === 'inactive2' ? 'ring-2 ring-red-500' : ''}" onclick="toggleCard('inactive2')">
                <p class="text-sm text-slate-500 mb-2">Inactive 2+ Days</p>
                <p class="text-4xl font-bold text-red-600">${inactive2Days.length}</p>
                ${state.expandedCard === 'inactive2' ? renderUserList(inactive2Days, true) : '<p class="text-xs text-slate-400 mt-2">Click to see users</p>'}
            </div>
            <div class="stat-card ${paymentFailed.length > 0 ? 'red' : 'gray'} ${state.expandedCard === 'payment' ? 'ring-2 ring-red-500' : ''}" onclick="toggleCard('payment')">
                <p class="text-sm text-slate-500 mb-2">Payment Failed</p>
                <p class="text-4xl font-bold ${paymentFailed.length > 0 ? 'text-red-600' : 'text-slate-400'}">${paymentFailed.length}</p>
                ${state.expandedCard === 'payment' ? renderUserList(paymentFailed) : '<p class="text-xs text-slate-400 mt-2">Click to see users</p>'}
            </div>
        </div>

        <!-- MESSAGES OVERVIEW - CLICKABLE CARDS -->
        <div class="card p-6">
            <h3 class="text-lg font-bold text-slate-800 mb-4">Messages Overview <span class="text-sm font-normal text-slate-500">(${state.dateFrom === state.dateTo ? formatDateShort(state.dateFrom) : formatDateShort(state.dateFrom) + ' - ' + formatDateShort(state.dateTo)})</span></h3>
            <div class="grid grid-cols-9 gap-3">
                <div class="msg-card bg-cyan-50 border border-cyan-200" onclick="filterMessages('WATER')">
                    <p class="text-3xl font-bold text-cyan-600">${waterMsgs}</p>
                    <p class="text-xs text-cyan-700 mt-1 font-medium">Water</p>
                </div>
                <div class="msg-card bg-orange-50 border border-orange-200" onclick="filterMessages('CALORIES')">
                    <p class="text-3xl font-bold text-orange-600">${calorieMsgs}</p>
                    <p class="text-xs text-orange-700 mt-1 font-medium">Calories</p>
                </div>
                <div class="msg-card bg-purple-50 border border-purple-200" onclick="filterMessages('CARBS')">
                    <p class="text-3xl font-bold text-purple-600">${carbMsgs}</p>
                    <p class="text-xs text-purple-700 mt-1 font-medium">Carbs</p>
                </div>
                <div class="msg-card bg-indigo-50 border border-indigo-200" onclick="filterMessages('AI_LOOKUP')">
                    <p class="text-3xl font-bold text-indigo-600">${aiMsgs}</p>
                    <p class="text-xs text-indigo-700 mt-1 font-medium">AI Lookups</p>
                </div>
                <div class="msg-card bg-pink-50 border border-pink-200" onclick="filterMessages('TEMPLATE')">
                    <p class="text-3xl font-bold text-pink-600">${templateMsgs}</p>
                    <p class="text-xs text-pink-700 mt-1 font-medium">Templates</p>
                </div>
                <div class="msg-card bg-slate-100 border border-slate-300" onclick="filterMessages('INVALID')">
                    <p class="text-3xl font-bold text-slate-500">${invalidMsgs}</p>
                    <p class="text-xs text-slate-600 mt-1 font-medium">Invalid</p>
                </div>
                <div class="msg-card bg-violet-50 border border-violet-200" onclick="filterMessages('VOICE')">
                    <p class="text-3xl font-bold text-violet-600">${voiceMsgs}</p>
                    <p class="text-xs text-violet-700 mt-1 font-medium">Voice</p>
                </div>
                <div class="msg-card bg-red-50 border border-red-200" onclick="filterMessages('UNAUTHORIZED')">
                    <p class="text-3xl font-bold text-red-500">${unauthorizedMsgs}</p>
                    <p class="text-xs text-red-600 mt-1 font-medium">Unauthorized</p>
                </div>
                <div class="msg-card bg-gradient-to-br from-indigo-500 to-purple-600" onclick="filterMessages(null)">
                    <p class="text-3xl font-bold text-white">${totalMsgs}</p>
                    <p class="text-xs text-indigo-100 mt-1 font-medium">TOTAL</p>
                </div>
            </div>
        </div>

        <!-- COST CARDS -->
        <div class="grid grid-cols-2 gap-4">
            <div class="card p-6 bg-gradient-to-br from-emerald-500 to-teal-600">
                <p class="text-emerald-100 text-sm mb-1">Total System Cost</p>
                <p class="text-5xl font-bold text-white">$${totalCost.toFixed(2)}</p>
            </div>
            <div class="card p-6">
                <p class="text-slate-500 text-sm mb-1">Average Cost Per User</p>
                <p class="text-5xl font-bold text-slate-800">$${avgPerUser.toFixed(4)}</p>
            </div>
        </div>

        <!-- 3 SEPARATE CHARTS -->
        ${state.dateFrom !== state.dateTo ? `
        <div class="card p-6">
            <h3 class="text-lg font-bold text-slate-800 mb-4">Activity Comparison</h3>
            <div class="grid grid-cols-3 gap-4">
                <div>
                    <h4 class="text-sm font-semibold text-orange-600 mb-2 text-center">Calories</h4>
                    <div style="height:200px"><canvas id="calChart"></canvas></div>
                </div>
                <div>
                    <h4 class="text-sm font-semibold text-cyan-600 mb-2 text-center">Water (oz)</h4>
                    <div style="height:200px"><canvas id="waterChart"></canvas></div>
                </div>
                <div>
                    <h4 class="text-sm font-semibold text-purple-600 mb-2 text-center">Messages</h4>
                    <div style="height:200px"><canvas id="msgChart"></canvas></div>
                </div>
            </div>
        </div>
        ` : ''}
    </div>`;
}

function filterMessages(category) {
    state.messageFilter = category;
    state.view = 'messages';
    render();
}

function renderUserList(users, showLastActive = false) {
    if (users.length === 0) return '<p class="text-sm text-slate-400 mt-3">None</p>';
    return `
    <div class="mt-4 pt-4 border-t border-slate-200 max-h-48 overflow-y-auto" onclick="event.stopPropagation()">
        ${users.map(u => `
            <div class="flex items-center justify-between py-2 px-2 hover:bg-slate-50 rounded cursor-pointer" onclick="openUser('${u.userId}')">
                <span class="font-medium text-slate-700">${u.name}</span>
                ${showLastActive ? '<span class="text-xs text-slate-400">' + (formatDateShort(u.lastActive) || 'Never') + '</span>' : ''}
            </div>
        `).join('')}
    </div>`;
}

function toggleCard(card) {
    state.expandedCard = state.expandedCard === card ? null : card;
    render();
}

function renderUsers() {
    const searchTerm = (state.userSearch || '').toLowerCase();
    const filteredUsers = state.users.filter(u => !searchTerm || u.name.toLowerCase().includes(searchTerm) || u.phone.includes(searchTerm) || (u.email||'').toLowerCase().includes(searchTerm));
    return `
    <div class="space-y-6">
        <div class="flex items-center justify-between">
            <h1 class="text-xl font-bold text-slate-800">All Users (${state.users.length})</h1>
            <div class="flex items-center gap-3">
                <div class="relative"><i data-lucide="search" class="w-4 h-4 text-slate-400 absolute left-3 top-1/2 -translate-y-1/2"></i><input type="text" placeholder="Search users..." class="input pl-10 w-56" value="${state.userSearch||''}" oninput="state.userSearch=this.value;render()"></div>
                <button onclick="openModal('addUser')" class="btn btn-primary"><i data-lucide="plus" class="w-4 h-4"></i> Add User</button>
            </div>
        </div>
        ${searchTerm ? '<p class="text-sm text-slate-500">Showing '+filteredUsers.length+' of '+state.users.length+' users</p>' : ''}
        <div class="grid grid-cols-3 gap-4">
            ${filteredUsers.map(u => {
                const totals = getUserTotalsInRange(u.userId);
                const totalCal = totals.reduce((s,t) => s + (t.calories||0), 0);
                const totalWater = totals.reduce((s,t) => s + (t.water||0), 0);
                const days = Math.max(1, Math.ceil((new Date(state.dateTo) - new Date(state.dateFrom)) / (1000*60*60*24)) + 1);
                const avgCal = Math.round(totalCal / days);
                const avgWater = Math.round(totalWater / days);
                const calPct = Math.min(Math.round((avgCal / u.calorieGoal) * 100), 100);
                const waterPct = Math.min(Math.round((avgWater / u.waterGoal) * 100), 100);
                const cost = state.costs.costs?.[u.userId]?.total || 0;
                const msgCount = state.messages.filter(m => m.userId === u.userId).length;
                const isPaymentFailed = u.paymentStatus === 'failed';
                
                return `
                <div class="user-card ${isPaymentFailed ? 'border-2 border-red-400' : ''}" onclick="openUser('${u.userId}')">
                    <div class="flex items-start justify-between mb-4">
                        <div class="flex items-center gap-3">
                            <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white text-lg font-bold">${u.name[0]}</div>
                            <div>
                                <h3 class="font-bold text-slate-800">${u.name}</h3>
                                <p class="text-sm text-slate-500">${u.phone}</p>
                            </div>
                        </div>
                        <div class="relative">
                            <button onclick="event.stopPropagation(); toggleDropdown('${u.userId}')" class="p-2 rounded-lg hover:bg-slate-100">
                                <i data-lucide="settings" class="w-4 h-4 text-slate-500"></i>
                            </button>
                            ${state.openDropdown === u.userId ? renderUserDropdown(u) : ''}
                        </div>
                    </div>
                    
                    <div class="space-y-3 mb-4">
                        <div>
                            <div class="flex justify-between text-sm mb-1">
                                <span class="text-slate-500">Calories</span>
                                <span class="font-medium">${avgCal} / ${u.calorieGoal} avg</span>
                            </div>
                            <div class="progress-bar"><div class="progress-fill bg-gradient-to-r from-orange-400 to-red-500" style="width:${calPct}%"></div></div>
                        </div>
                        <div>
                            <div class="flex justify-between text-sm mb-1">
                                <span class="text-slate-500">Water</span>
                                <span class="font-medium">${avgWater}oz / ${u.waterGoal}oz avg</span>
                            </div>
                            <div class="progress-bar"><div class="progress-fill bg-gradient-to-r from-cyan-400 to-blue-500" style="width:${waterPct}%"></div></div>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-4 gap-2 pt-4 border-t border-slate-100 text-center">
                        <div>
                            <p class="text-lg font-bold text-emerald-600">$${cost.toFixed(2)}</p>
                            <p class="text-xs text-slate-500">Cost</p>
                        </div>
                        <div>
                            <p class="text-lg font-bold text-indigo-600">${msgCount}</p>
                            <p class="text-xs text-slate-500">Msgs</p>
                        </div>
                        <div>
                            <p class="text-lg font-bold text-orange-600">${calPct}%</p>
                            <p class="text-xs text-slate-500">Cal Goal</p>
                        </div>
                        <div>
                            <p class="text-lg font-bold text-cyan-600">${waterPct}%</p>
                            <p class="text-xs text-slate-500">Water Goal</p>
                        </div>
                    </div>
                    
                    <div class="mt-3 pt-3 border-t border-slate-100 flex justify-between items-center">
                        <span class="badge ${u.paymentStatus === 'active' || !u.paymentStatus ? 'bg-emerald-100 text-emerald-700' : 'bg-red-100 text-red-700'}">${u.paymentStatus || 'active'}</span>
                        <span class="text-xs text-slate-400">Last: ${formatDateShort(u.lastActive) || 'Never'}</span>
                    </div>
                </div>`;
            }).join('')}
        </div>
    </div>`;
}

function renderUserDropdown(u) {
    return `
    <div class="dropdown" onclick="event.stopPropagation()">
        <div class="dropdown-item" onclick="event.stopPropagation(); openModal('editUser', '${u.userId}')"><i data-lucide="edit" class="w-4 h-4"></i> Edit User</div>
        <div class="dropdown-item" onclick="event.stopPropagation(); openModal('editGoals', '${u.userId}')"><i data-lucide="target" class="w-4 h-4"></i> Change Goals</div>
        <div class="dropdown-item" onclick="event.stopPropagation(); openModal('templates', '${u.userId}')"><i data-lucide="bookmark" class="w-4 h-4"></i> Manage Templates</div>
        <div class="dropdown-item" onclick="event.stopPropagation(); openModal('payment', '${u.userId}')"><i data-lucide="credit-card" class="w-4 h-4"></i> Payment Settings</div>
        <hr class="my-2">
        <div class="dropdown-item text-red-600" onclick="event.stopPropagation(); confirmDelete('${u.userId}')"><i data-lucide="trash-2" class="w-4 h-4"></i> Delete User</div>
    </div>`;
}

function toggleDropdown(userId) {
    state.openDropdown = state.openDropdown === userId ? null : userId;
    render();
}

function renderUserDetail() {
    const u = state.users.find(x => x.userId === state.selectedUser);
    if (!u) return '<p class="text-center text-slate-500 py-8">User not found</p>';
    
    const userMsgs = getMessagesInRange(u.userId);
    const userTemplates = state.templates.filter(t => t.userId === u.userId);
    const totals = getUserTotalsInRange(u.userId);
    const totalCal = totals.reduce((s,t) => s + (t.calories||0), 0);
    const totalWater = totals.reduce((s,t) => s + (t.water||0), 0);
    const cost = state.costs.costs?.[u.userId] || { total: 0 };
    const td = getTodayTotals(u.userId);
    const calPct = Math.round((td.calories / u.calorieGoal) * 100);
    const waterPct = Math.round((td.water / u.waterGoal) * 100);
    const portalLink = window.location.origin + window.location.pathname + '?user=' + u.userId;
    
    const calLogs = userMsgs.filter(m => m.category === 'CALORIES').length;
    const waterLogs = userMsgs.filter(m => m.category === 'WATER').length;
    const aiLookups = userMsgs.filter(m => m.category === 'AI_LOOKUP').length;
    const tplUsed = userMsgs.filter(m => m.category === 'TEMPLATE').length;
    
    const isMultiDay = state.dateFrom !== state.dateTo;
    const periodLabel = isMultiDay ? 'Period' : "Today's";
    const periodCal = isMultiDay ? totalCal : td.calories;
    const periodWater = isMultiDay ? totalWater : td.water;
    const days = isMultiDay ? Math.max(1, Math.ceil((new Date(state.dateTo) - new Date(state.dateFrom)) / 86400000) + 1) : 1;
    const avgCal = Math.round(periodCal / days);
    const avgWater = Math.round(periodWater / days);
    const calPctDisplay = isMultiDay ? Math.round((avgCal / u.calorieGoal) * 100) : calPct;
    const waterPctDisplay = isMultiDay ? Math.round((avgWater / u.waterGoal) * 100) : waterPct;

    return `
    <div class="space-y-6" id="report-content">
        <div class="flex items-center justify-between no-print">
            <div class="flex items-center gap-4">
                <button onclick="nav('users')" class="btn btn-secondary"><i data-lucide="arrow-left" class="w-4 h-4"></i></button>
                <div class="w-14 h-14 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white text-2xl font-bold">${u.name[0]}</div>
                <div>
                    <h1 class="text-2xl font-bold text-slate-800">${u.name}</h1>
                    <p class="text-slate-500">${u.phone}</p>
                </div>
                <span class="badge ${u.paymentStatus === 'active' || !u.paymentStatus ? 'bg-emerald-100 text-emerald-700' : 'bg-red-100 text-red-700'}">${u.paymentStatus || 'active'}</span>
            </div>
            <div class="flex items-center gap-3">
                <button onclick="copyLink('${portalLink}')" class="btn btn-secondary"><i data-lucide="link" class="w-4 h-4"></i> Share Portal</button>
                <button onclick="openModal('editUser', '${u.userId}')" class="btn btn-secondary"><i data-lucide="settings" class="w-4 h-4"></i></button>
                <button onclick="exportPDF('${u.name}')" class="btn btn-primary"><i data-lucide="download" class="w-4 h-4"></i> PDF</button>
            </div>
        </div>
        
        <!-- Header for PDF -->
        <div class="hidden print:block text-center mb-6"><h1 class="text-3xl font-bold">${u.name} - CaluTracker Report</h1><p class="text-slate-500">${formatDateShort(state.dateFrom)} - ${formatDateShort(state.dateTo)}</p></div>
        
        <div class="grid grid-cols-2 gap-4">
            <div class="card p-6 bg-gradient-to-br from-orange-50 to-amber-50 border-2 border-orange-200">
                <div class="flex justify-between mb-2">
                    <h3 class="font-bold text-slate-700">${periodLabel} ${u.trackMode === 'carbs' ? 'Carbs' : 'Calories'}</h3>
                    <span class="text-xl font-bold text-orange-600">${calPctDisplay}%</span>
                </div>
                <p class="text-5xl font-bold text-orange-600">${periodCal.toLocaleString()}</p>
                <p class="text-slate-500 mt-1">${isMultiDay ? 'avg ' + avgCal + '/day • goal ' + u.calorieGoal : 'of ' + u.calorieGoal.toLocaleString() + ' goal'}</p>
                <div class="mt-4 progress-bar h-3"><div class="progress-fill bg-gradient-to-r from-orange-400 to-red-500" style="width:${Math.min(calPctDisplay,100)}%"></div></div>
            </div>
            <div class="card p-6 bg-gradient-to-br from-cyan-50 to-blue-50 border-2 border-cyan-200">
                <div class="flex justify-between mb-2">
                    <h3 class="font-bold text-slate-700">${periodLabel} Water</h3>
                    <span class="text-xl font-bold text-cyan-600">${waterPctDisplay}%</span>
                </div>
                <p class="text-5xl font-bold text-cyan-600">${periodWater} oz <span class="text-lg">(${ozToCups(periodWater)} cups)</span></p>
                <p class="text-slate-500 mt-1">${isMultiDay ? 'avg ' + avgWater + 'oz/day • goal ' + u.waterGoal + 'oz' : 'of ' + u.waterGoal + ' oz (' + ozToCups(u.waterGoal) + ' cups) goal'}</p>
                <div class="mt-4 progress-bar h-3"><div class="progress-fill bg-gradient-to-r from-cyan-400 to-blue-500" style="width:${Math.min(waterPctDisplay,100)}%"></div></div>
            </div>
        </div>

        <!-- CHARTS: Calories, Water, and When They Log -->
        ${state.dateFrom !== state.dateTo ? `
        <div class="grid grid-cols-3 gap-4">
            <div class="card p-6">
                <h3 class="font-bold text-orange-600 mb-4">Calories Trend</h3>
                <div style="height:180px"><canvas id="userCalChart"></canvas></div>
            </div>
            <div class="card p-6">
                <h3 class="font-bold text-cyan-600 mb-4">Water Trend</h3>
                <div style="height:180px"><canvas id="userWaterChart"></canvas></div>
            </div>
            <div class="card p-6">
                <h3 class="font-bold text-purple-600 mb-4">When They Log</h3>
                <div style="height:180px"><canvas id="userTimingChart"></canvas></div>
            </div>
        </div>
        ` : ''}
        
        <div class="card p-6">
            <h3 class="font-bold text-slate-800 mb-4">Activity Summary (${formatDateShort(state.dateFrom)} - ${formatDateShort(state.dateTo)})</h3>
            <div class="grid grid-cols-6 gap-3">
                <div class="text-center p-3 rounded-xl bg-orange-50 border border-orange-200"><p class="text-2xl font-bold text-orange-600">${totalCal.toLocaleString()}</p><p class="text-xs text-slate-600">Total Cal</p></div>
                <div class="text-center p-3 rounded-xl bg-cyan-50 border border-cyan-200"><p class="text-2xl font-bold text-cyan-600">${totalWater}oz</p><p class="text-xs text-slate-600">Total Water</p></div>
                <div class="text-center p-3 rounded-xl bg-orange-50 border border-orange-200"><p class="text-2xl font-bold text-orange-600">${calLogs}</p><p class="text-xs text-slate-600">Cal Logs</p></div>
                <div class="text-center p-3 rounded-xl bg-cyan-50 border border-cyan-200"><p class="text-2xl font-bold text-cyan-600">${waterLogs}</p><p class="text-xs text-slate-600">Water Logs</p></div>
                <div class="text-center p-3 rounded-xl bg-indigo-50 border border-indigo-200"><p class="text-2xl font-bold text-indigo-600">${aiLookups}</p><p class="text-xs text-slate-600">AI Lookups</p></div>
                <div class="text-center p-3 rounded-xl bg-pink-50 border border-pink-200"><p class="text-2xl font-bold text-pink-600">${tplUsed}</p><p class="text-xs text-slate-600">Templates</p></div>
            </div>
        </div>
        
        <div class="grid grid-cols-2 gap-4">
            <div class="card p-6">
                <div class="flex justify-between items-center mb-4"><h3 class="font-bold text-slate-800">Settings</h3><button onclick="openModal('editGoals', '${u.userId}')" class="btn btn-secondary text-sm py-1 px-3"><i data-lucide="edit" class="w-3 h-3"></i></button></div>
                <div class="grid grid-cols-2 gap-3">
                    <div class="p-3 rounded-lg bg-slate-50"><p class="text-xs text-slate-500">Track Mode</p><p class="text-lg font-bold text-indigo-600 capitalize">${u.trackMode || 'calories'}</p></div>
                    <div class="p-3 rounded-lg bg-slate-50"><p class="text-xs text-slate-500">${u.trackMode === 'carbs' ? 'Carb' : 'Calorie'} Goal</p><p class="text-lg font-bold text-orange-600">${u.calorieGoal}</p></div>
                    <div class="p-3 rounded-lg bg-slate-50"><p class="text-xs text-slate-500">Water Goal</p><p class="text-lg font-bold text-cyan-600">${u.waterGoal}oz</p></div>
                    <div class="p-3 rounded-lg bg-slate-50"><p class="text-xs text-slate-500">Timezone</p><p class="text-sm font-bold text-slate-700">${u.timezone || 'Eastern'}</p></div>
                </div>
            </div>
            <div class="card p-6">
                <div class="flex justify-between items-center mb-4"><h3 class="font-bold text-slate-800">Templates (${userTemplates.length})</h3><button onclick="openModal('templates', '${u.userId}')" class="btn btn-secondary text-sm py-1 px-3"><i data-lucide="plus" class="w-3 h-3"></i></button></div>
                ${userTemplates.length > 0 ? `<div class="space-y-2 max-h-32 overflow-y-auto">${userTemplates.slice(0,5).map(t => `<div class="flex justify-between p-2 bg-slate-50 rounded-lg text-sm"><span class="font-medium">${t.name}</span><span class="text-slate-500">${t.calories}cal</span></div>`).join('')}${userTemplates.length > 5 ? '<p class="text-xs text-slate-400 text-center">+' + (userTemplates.length-5) + ' more</p>' : ''}</div>` : '<p class="text-slate-400 text-center py-4">No templates</p>'}
            </div>
        </div>

        <div class="card overflow-hidden">
            <div class="p-4 border-b border-slate-100 flex justify-between items-center"><h3 class="font-bold text-slate-800">Message History (${userMsgs.length})</h3><span class="text-sm text-slate-500">Click row to expand</span></div>
            <div class="max-h-[400px] overflow-y-auto">
                <table>
                    <thead class="sticky top-0"><tr><th>Time</th><th>Type</th><th>Category</th><th>Message</th><th>Food</th><th>Response</th></tr></thead>
                    <tbody>
                        ${userMsgs.slice(0,100).map((m, idx) => `
                            <tr class="cursor-pointer hover:bg-indigo-50" onclick="toggleMessage(${idx})">
                                <td class="text-sm text-slate-500 whitespace-nowrap">${m.timestamp}</td>
                                <td><span class="badge ${m.type==='VOICE'?'bg-purple-100 text-purple-700':'bg-cyan-100 text-cyan-700'}">${m.type}</span></td>
                                <td><span class="badge ${getCategoryColor(m.category)}">${m.category}</span></td>
                                <td class="${state.expandedMessage === idx ? '' : 'max-w-[150px] truncate'}">${m.incoming}</td>
                                <td class="text-indigo-600 ${state.expandedMessage === idx ? '' : 'max-w-[80px] truncate'}">${m.foodName || m.parsedFood || '-'}</td>
                                <td class="text-slate-500 ${state.expandedMessage === idx ? '' : 'max-w-[150px] truncate'}">${m.reply || '-'}</td>
                            </tr>
                            ${state.expandedMessage === idx ? `<tr class="bg-indigo-50"><td colspan="6" class="p-4"><div class="grid grid-cols-2 gap-4"><div><p class="text-xs text-slate-500 mb-1">Full Message:</p><p class="bg-white p-3 rounded">${m.incoming}</p></div><div><p class="text-xs text-slate-500 mb-1">Response:</p><p class="bg-white p-3 rounded">${m.reply || '-'}</p></div></div></td></tr>` : ''}
                        `).join('')}
                    </tbody>
                </table>
            </div>
        </div>
    </div>`;
}

function toggleMessage(idx) { state.expandedMessage = state.expandedMessage === idx ? null : idx; render(); }

function getCategoryColor(cat) {
    const colors = {
        CALORIES: 'bg-orange-100 text-orange-700',
        WATER: 'bg-cyan-100 text-cyan-700',
        CARBS: 'bg-purple-100 text-purple-700',
        AI_LOOKUP: 'bg-indigo-100 text-indigo-700',
        TEMPLATE: 'bg-pink-100 text-pink-700',
        STATUS: 'bg-blue-100 text-blue-700',
        UNAUTHORIZED: 'bg-red-100 text-red-700',
        INVALID: 'bg-slate-100 text-slate-700'
    };
    return colors[cat] || 'bg-slate-100 text-slate-700';
}

function renderMessages() {
    let msgs = getMessagesInRange();
    
    // Apply filter from clicking message cards
    if (state.messageFilter === 'VOICE') {
        msgs = msgs.filter(m => m.type === 'VOICE');
    } else if (state.messageFilter) {
        msgs = msgs.filter(m => m.category === state.messageFilter);
    }
    
    return `
    <div class="space-y-6">
        <div class="flex items-center justify-between">
            <h1 class="text-xl font-bold text-slate-800">
                Messages ${state.messageFilter ? '- ' + state.messageFilter : ''} (${msgs.length})
            </h1>
            ${state.messageFilter ? '<button onclick="state.messageFilter=null;render()" class="btn btn-secondary">Clear Filter</button>' : ''}
        </div>
        <div class="card overflow-hidden">
            <div class="max-h-[calc(100vh-200px)] overflow-y-auto">
                <table>
                    <thead class="sticky top-0">
                        <tr><th>Date & Time</th><th>User</th><th>Type</th><th>Category</th><th>Message</th><th>Food/Details</th><th>Response</th></tr>
                    </thead>
                    <tbody>
                        ${msgs.map(m => {
                            const u = getUser(m.userId);
                            return `
                            <tr>
                                <td class="text-sm text-slate-500 whitespace-nowrap">${m.timestamp}</td>
                                <td class="font-medium text-indigo-600 cursor-pointer" onclick="openUser('${m.userId}')">${u?.name || m.userId || '-'}</td>
                                <td><span class="badge ${m.type==='VOICE'?'bg-purple-100 text-purple-700':'bg-cyan-100 text-cyan-700'}">${m.type}</span></td>
                                <td><span class="badge ${getCategoryColor(m.category)}">${m.category}</span></td>
                                <td class="max-w-[200px]">${m.incoming}</td>
                                <td class="max-w-[150px] text-indigo-600">${m.foodName || m.parsedFood || '-'}</td>
                                <td class="max-w-[250px] text-slate-500">${m.reply || '-'}</td>
                            </tr>`;
                        }).join('')}
                    </tbody>
                </table>
            </div>
        </div>
    </div>`;
}

function renderActionCenter() {
    const paymentFailed = getPaymentFailed();
    const inactive = getInactive2Days();
    
    return `
    <div class="space-y-6">
        <h1 class="text-xl font-bold text-slate-800">Action Center</h1>
        
        ${paymentFailed.length > 0 ? `
        <div class="card p-6 border-2 border-red-400 bg-red-50">
            <div class="flex items-center gap-3 mb-4">
                <div class="w-12 h-12 rounded-xl bg-red-200 flex items-center justify-center">
                    <i data-lucide="credit-card" class="w-6 h-6 text-red-600"></i>
                </div>
                <div>
                    <h3 class="font-bold text-red-800 text-lg">Payment Failed (${paymentFailed.length})</h3>
                    <p class="text-sm text-red-600">These users need payment attention</p>
                </div>
            </div>
            <div class="space-y-2">
                ${paymentFailed.map(u => `
                <div class="flex items-center justify-between bg-white rounded-xl p-4 border border-red-200">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 rounded-lg bg-red-100 flex items-center justify-center text-red-600 font-bold">${u.name[0]}</div>
                        <div><p class="font-medium">${u.name}</p><p class="text-sm text-slate-500">${u.phone}</p></div>
                    </div>
                    <div class="flex gap-2">
                        <button onclick="openModal('payment', '${u.userId}')" class="btn btn-success">Retry Payment</button>
                        <button onclick="openUser('${u.userId}')" class="btn btn-secondary">View</button>
                    </div>
                </div>
                `).join('')}
            </div>
        </div>
        ` : ''}
        
        ${inactive.length > 0 ? `
        <div class="card p-6 border-2 border-amber-400 bg-amber-50">
            <div class="flex items-center gap-3 mb-4">
                <div class="w-12 h-12 rounded-xl bg-amber-200 flex items-center justify-center">
                    <i data-lucide="user-minus" class="w-6 h-6 text-amber-600"></i>
                </div>
                <div>
                    <h3 class="font-bold text-amber-800 text-lg">Inactive 2+ Days (${inactive.length})</h3>
                    <p class="text-sm text-amber-600">Consider reaching out</p>
                </div>
            </div>
            <div class="space-y-2">
                ${inactive.slice(0,20).map(u => `
                <div class="flex items-center justify-between bg-white rounded-xl p-4 border border-amber-200">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 rounded-lg bg-amber-100 flex items-center justify-center text-amber-600 font-bold">${u.name[0]}</div>
                        <div><p class="font-medium">${u.name}</p><p class="text-sm text-slate-500">Last: ${formatDateShort(u.lastActive) || 'Never'}</p></div>
                    </div>
                    <button onclick="openUser('${u.userId}')" class="btn btn-secondary">View</button>
                </div>
                `).join('')}
            </div>
        </div>
        ` : ''}
        
        ${paymentFailed.length === 0 && inactive.length === 0 ? `
        <div class="card p-12 text-center border-2 border-emerald-400">
            <div class="w-16 h-16 rounded-full bg-emerald-100 flex items-center justify-center mx-auto mb-4">
                <i data-lucide="check-circle" class="w-8 h-8 text-emerald-600"></i>
            </div>
            <h3 class="text-xl font-bold text-slate-800 mb-2">All Clear!</h3>
            <p class="text-slate-500">No items need attention.</p>
        </div>
        ` : ''}
    </div>`;
}

function renderUserPortal() {
    const u = state.users.find(x => x.userId === userPortalId);
    if (!u) return '<div class="p-8 text-center"><p class="text-slate-500">User not found</p></div>';
    
    const userMsgs = getMessagesInRange(u.userId);
    const userTemplates = state.templates.filter(t => t.userId === u.userId);
    const totals = getUserTotalsInRange(u.userId);
    const totalCal = totals.reduce((s,t) => s + (t.calories||0), 0);
    const totalWater = totals.reduce((s,t) => s + (t.water||0), 0);
    const td = getTodayTotals(u.userId);
    const calPct = Math.round((td.calories / u.calorieGoal) * 100);
    const waterPct = Math.round((td.water / u.waterGoal) * 100);
    
    const calLogs = userMsgs.filter(m => m.category === 'CALORIES').length;
    const waterLogs = userMsgs.filter(m => m.category === 'WATER').length;
    const aiLookups = userMsgs.filter(m => m.category === 'AI_LOOKUP').length;
    const tplUsed = userMsgs.filter(m => m.category === 'TEMPLATE').length;
    
    const isMultiDay = state.dateFrom !== state.dateTo;
    const periodLabel = isMultiDay ? 'Period' : "Today's";
    const periodCal = isMultiDay ? totalCal : td.calories;
    const periodWater = isMultiDay ? totalWater : td.water;
    const days = isMultiDay ? Math.max(1, Math.ceil((new Date(state.dateTo) - new Date(state.dateFrom)) / 86400000) + 1) : 1;
    const avgCal = Math.round(periodCal / days);
    const avgWater = Math.round(periodWater / days);
    const calPctDisplay = isMultiDay ? Math.round((avgCal / u.calorieGoal) * 100) : calPct;
    const waterPctDisplay = isMultiDay ? Math.round((avgWater / u.waterGoal) * 100) : waterPct;

    return `
    <div class="min-h-screen bg-gradient-to-br from-indigo-50 to-purple-50">
        <header class="bg-white/90 backdrop-blur border-b border-slate-200 px-6 py-4 sticky top-0 z-40 no-print">
            <div class="max-w-7xl mx-auto flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white text-xl font-bold">${u.name[0]}</div>
                    <div><h1 class="text-xl font-bold text-slate-800">${u.name}</h1><p class="text-sm text-slate-500">CaluTracker</p></div>
                </div>
                <div class="flex items-center gap-3">
                    <div class="bg-indigo-50 px-3 py-2 rounded-lg"><span id="live-time" class="text-indigo-700 font-medium text-sm"></span></div>
                    <button onclick="exportPDF('${u.name}')" class="btn btn-primary"><i data-lucide="download" class="w-4 h-4"></i> PDF</button>
                </div>
            </div>
        </header>
        <div class="max-w-7xl mx-auto p-6">
            <!-- DATE RANGE -->
            <div class="bg-white rounded-xl p-3 mb-6 flex items-center gap-3 shadow-sm no-print">
                <span class="text-sm text-slate-600">Date:</span>
                <input type="date" class="input py-2 px-3 w-36 text-sm" value="${state.dateFrom}" onchange="state.dateFrom=this.value;render()">
                <span class="text-slate-400">to</span>
                <input type="date" class="input py-2 px-3 w-36 text-sm" value="${state.dateTo}" onchange="state.dateTo=this.value;render()">
                <button onclick="state.dateFrom=today();state.dateTo=today();render()" class="tab-btn ${state.dateFrom===state.dateTo?'active':''}">Today</button>
                <button onclick="state.dateFrom=daysAgo(6);state.dateTo=today();render()" class="tab-btn">7 Days</button>
                <button onclick="state.dateFrom=daysAgo(29);state.dateTo=today();render()" class="tab-btn">30 Days</button>
            </div>
            
            <div class="space-y-6" id="report-content">
                <!-- PDF Header -->
                <div class="hidden print:block text-center mb-6"><h1 class="text-3xl font-bold">${u.name} - CaluTracker Report</h1><p class="text-slate-500">${formatDateShort(state.dateFrom)} - ${formatDateShort(state.dateTo)}</p></div>
                
                <!-- TOP CARDS - Period or Today -->
                <div class="grid grid-cols-2 gap-4">
                    <div class="card p-6 bg-gradient-to-br from-orange-50 to-amber-50 border-2 border-orange-200">
                        <div class="flex justify-between mb-2">
                            <h3 class="font-bold text-slate-700">${periodLabel} ${u.trackMode === 'carbs' ? 'Carbs' : 'Calories'}</h3>
                            <span class="text-xl font-bold text-orange-600">${calPctDisplay}%</span>
                        </div>
                        <p class="text-5xl font-bold text-orange-600">${periodCal.toLocaleString()}</p>
                        <p class="text-slate-500 mt-1">${isMultiDay ? 'avg ' + avgCal + '/day • goal ' + u.calorieGoal : 'of ' + u.calorieGoal.toLocaleString() + ' goal'}</p>
                        <div class="mt-4 progress-bar h-3"><div class="progress-fill bg-gradient-to-r from-orange-400 to-red-500" style="width:${Math.min(calPctDisplay,100)}%"></div></div>
                    </div>
                    <div class="card p-6 bg-gradient-to-br from-cyan-50 to-blue-50 border-2 border-cyan-200">
                        <div class="flex justify-between mb-2">
                            <h3 class="font-bold text-slate-700">${periodLabel} Water</h3>
                            <span class="text-xl font-bold text-cyan-600">${waterPctDisplay}%</span>
                        </div>
                        <p class="text-5xl font-bold text-cyan-600">${periodWater} oz <span class="text-lg">(${ozToCups(periodWater)} cups)</span></p>
                        <p class="text-slate-500 mt-1">${isMultiDay ? 'avg ' + avgWater + 'oz/day • goal ' + u.waterGoal + 'oz' : 'of ' + u.waterGoal + ' oz (' + ozToCups(u.waterGoal) + ' cups) goal'}</p>
                        <div class="mt-4 progress-bar h-3"><div class="progress-fill bg-gradient-to-r from-cyan-400 to-blue-500" style="width:${Math.min(waterPctDisplay,100)}%"></div></div>
                    </div>
                </div>
                
                <!-- CHARTS - same as admin -->
                ${isMultiDay ? `
                <div class="grid grid-cols-3 gap-4">
                    <div class="card p-6"><h3 class="font-bold text-orange-600 mb-4">Calories Trend</h3><div style="height:180px"><canvas id="portalCalChart"></canvas></div></div>
                    <div class="card p-6"><h3 class="font-bold text-cyan-600 mb-4">Water Trend</h3><div style="height:180px"><canvas id="portalWaterChart"></canvas></div></div>
                    <div class="card p-6"><h3 class="font-bold text-purple-600 mb-4">When You Log</h3><div style="height:180px"><canvas id="portalTimingChart"></canvas></div></div>
                </div>
                ` : ''}
                
                <!-- ACTIVITY SUMMARY - only show logs/lookups (Cal/Water totals already shown above) -->
                <div class="card p-6">
                    <h3 class="font-bold text-slate-800 mb-4">Activity Summary (${formatDateShort(state.dateFrom)} - ${formatDateShort(state.dateTo)})</h3>
                    <div class="grid grid-cols-4 gap-4">
                        <div class="text-center p-4 rounded-xl bg-orange-50 border border-orange-200"><p class="text-3xl font-bold text-orange-600">${calLogs}</p><p class="text-sm text-slate-600">Cal Logs</p></div>
                        <div class="text-center p-4 rounded-xl bg-cyan-50 border border-cyan-200"><p class="text-3xl font-bold text-cyan-600">${waterLogs}</p><p class="text-sm text-slate-600">Water Logs</p></div>
                        <div class="text-center p-4 rounded-xl bg-indigo-50 border border-indigo-200"><p class="text-3xl font-bold text-indigo-600">${aiLookups}</p><p class="text-sm text-slate-600">AI Lookups</p></div>
                        <div class="text-center p-4 rounded-xl bg-pink-50 border border-pink-200"><p class="text-3xl font-bold text-pink-600">${tplUsed}</p><p class="text-sm text-slate-600">Templates Used</p></div>
                    </div>
                </div>
                
                <!-- SETTINGS & TEMPLATES - with edit buttons for user -->
                <div class="grid grid-cols-2 gap-4">
                    <div class="card p-6">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="font-bold text-slate-800">Settings</h3>
                            <button onclick="openModal('portalEditGoals')" class="btn btn-secondary text-sm py-1 px-3"><i data-lucide="edit" class="w-3 h-3"></i> Edit</button>
                        </div>
                        <div class="grid grid-cols-2 gap-3">
                            <div class="p-3 rounded-lg bg-slate-50"><p class="text-xs text-slate-500">Track Mode</p><p class="text-lg font-bold text-indigo-600 capitalize">${u.trackMode || 'calories'}</p></div>
                            <div class="p-3 rounded-lg bg-slate-50"><p class="text-xs text-slate-500">${u.trackMode === 'carbs' ? 'Carb' : 'Calorie'} Goal</p><p class="text-lg font-bold text-orange-600">${u.calorieGoal}</p></div>
                            <div class="p-3 rounded-lg bg-slate-50"><p class="text-xs text-slate-500">Water Goal</p><p class="text-lg font-bold text-cyan-600">${u.waterGoal}oz</p></div>
                            <div class="p-3 rounded-lg bg-slate-50"><p class="text-xs text-slate-500">Timezone</p><p class="text-sm font-bold text-slate-700">${u.timezone || 'Eastern'}</p></div>
                        </div>
                    </div>
                    <div class="card p-6">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="font-bold text-slate-800">Templates (${userTemplates.length})</h3>
                            <button onclick="openModal('addTemplate')" class="btn btn-secondary text-sm py-1 px-3"><i data-lucide="plus" class="w-3 h-3"></i> Add</button>
                        </div>
                        ${userTemplates.length > 0 ? `<div class="space-y-2 max-h-32 overflow-y-auto">${userTemplates.map(t => `<div class="flex justify-between items-center p-2 bg-slate-50 rounded-lg text-sm"><span class="font-medium">${t.name}</span><div class="flex items-center gap-2"><span class="text-slate-500">${t.calories}cal</span><button onclick="deleteTemplate('${t.name}')" class="text-red-500 hover:bg-red-50 p-1 rounded"><i data-lucide="trash-2" class="w-3 h-3"></i></button></div></div>`).join('')}</div>` : '<p class="text-slate-400 text-center py-4">No templates yet</p>'}
                    </div>
                </div>
                
                <!-- MESSAGE HISTORY - same as admin -->
                <div class="card overflow-hidden">
                    <div class="p-4 border-b border-slate-100 flex justify-between items-center"><h3 class="font-bold text-slate-800">Message History (${userMsgs.length})</h3><span class="text-sm text-slate-500">Click row to expand</span></div>
                    <div class="max-h-[400px] overflow-y-auto">
                        <table>
                            <thead class="sticky top-0"><tr><th>Time</th><th>Type</th><th>Category</th><th>Message</th><th>Food</th><th>Response</th></tr></thead>
                            <tbody>
                                ${userMsgs.slice(0,100).map((m, idx) => `
                                    <tr class="cursor-pointer hover:bg-indigo-50" onclick="toggleMessage(${idx})">
                                        <td class="text-sm text-slate-500 whitespace-nowrap">${m.timestamp}</td>
                                        <td><span class="badge ${m.type==='VOICE'?'bg-purple-100 text-purple-700':'bg-cyan-100 text-cyan-700'}">${m.type}</span></td>
                                        <td><span class="badge ${getCategoryColor(m.category)}">${m.category}</span></td>
                                        <td class="${state.expandedMessage === idx ? '' : 'max-w-[150px] truncate'}">${m.incoming}</td>
                                        <td class="text-indigo-600 ${state.expandedMessage === idx ? '' : 'max-w-[80px] truncate'}">${m.foodName || m.parsedFood || '-'}</td>
                                        <td class="text-slate-500 ${state.expandedMessage === idx ? '' : 'max-w-[150px] truncate'}">${m.reply || '-'}</td>
                                    </tr>
                                    ${state.expandedMessage === idx ? `<tr class="bg-indigo-50"><td colspan="6" class="p-4"><div class="grid grid-cols-2 gap-4"><div><p class="text-xs text-slate-500 mb-1">Full Message:</p><p class="bg-white p-3 rounded">${m.incoming}</p></div><div><p class="text-xs text-slate-500 mb-1">Response:</p><p class="bg-white p-3 rounded">${m.reply || '-'}</p></div></div></td></tr>` : ''}
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    ${state.showModal ? renderModal() : ''}`;
}

function renderPortalDashboard(u, td, calPct, waterPct, totalCal, totalWater, userMsgs) {
    const calLogs = userMsgs.filter(m => m.category === 'CALORIES').length;
    const waterLogs = userMsgs.filter(m => m.category === 'WATER').length;
    const aiLookups = userMsgs.filter(m => m.category === 'AI_LOOKUP').length;
    const tplUsed = userMsgs.filter(m => m.category === 'TEMPLATE').length;
    
    return `
    <!-- Header for PDF -->
    <div class="hidden print:block text-center mb-6"><h1 class="text-3xl font-bold">${u.name} - CaluTracker Report</h1><p class="text-slate-500">${formatDateShort(state.dateFrom)} - ${formatDateShort(state.dateTo)}</p></div>
    
    <div class="grid grid-cols-2 gap-4">
        <div class="card p-6 bg-gradient-to-br from-orange-50 to-amber-50 border-2 border-orange-200">
            <div class="flex justify-between mb-2"><h3 class="font-bold text-slate-700">Today's ${u.trackMode === 'carbs' ? 'Carbs' : 'Calories'}</h3><span class="text-xl font-bold text-orange-600">${calPct}%</span></div>
            <p class="text-5xl font-bold text-orange-600">${td.calories}</p>
            <p class="text-slate-500">of ${u.calorieGoal} goal</p>
            <div class="mt-4 progress-bar h-3"><div class="progress-fill bg-gradient-to-r from-orange-400 to-red-500" style="width:${Math.min(calPct,100)}%"></div></div>
        </div>
        <div class="card p-6 bg-gradient-to-br from-cyan-50 to-blue-50 border-2 border-cyan-200">
            <div class="flex justify-between mb-2"><h3 class="font-bold text-slate-700">Today's Water</h3><span class="text-xl font-bold text-cyan-600">${waterPct}%</span></div>
            <p class="text-5xl font-bold text-cyan-600">${td.water} oz</p>
            <p class="text-lg text-cyan-500">(${ozToCups(td.water)} cups)</p>
            <p class="text-slate-500">of ${u.waterGoal} oz (${ozToCups(u.waterGoal)} cups) goal</p>
            <div class="mt-4 progress-bar h-3"><div class="progress-fill bg-gradient-to-r from-cyan-400 to-blue-500" style="width:${Math.min(waterPct,100)}%"></div></div>
        </div>
    </div>
    
    <div class="card p-6">
        <h3 class="font-bold text-slate-800 mb-4">Activity Summary (${formatDateShort(state.dateFrom)} - ${formatDateShort(state.dateTo)})</h3>
        <div class="grid grid-cols-6 gap-3">
            <div class="text-center p-3 rounded-xl bg-orange-50 border border-orange-200"><p class="text-2xl font-bold text-orange-600">${totalCal.toLocaleString()}</p><p class="text-xs text-slate-600">Total Cal</p></div>
            <div class="text-center p-3 rounded-xl bg-cyan-50 border border-cyan-200"><p class="text-2xl font-bold text-cyan-600">${totalWater}oz</p><p class="text-xs text-slate-600">Total Water</p></div>
            <div class="text-center p-3 rounded-xl bg-orange-50 border border-orange-200"><p class="text-2xl font-bold text-orange-600">${calLogs}</p><p class="text-xs text-slate-600">Cal Logs</p></div>
            <div class="text-center p-3 rounded-xl bg-cyan-50 border border-cyan-200"><p class="text-2xl font-bold text-cyan-600">${waterLogs}</p><p class="text-xs text-slate-600">Water Logs</p></div>
            <div class="text-center p-3 rounded-xl bg-indigo-50 border border-indigo-200"><p class="text-2xl font-bold text-indigo-600">${aiLookups}</p><p class="text-xs text-slate-600">AI Lookups</p></div>
            <div class="text-center p-3 rounded-xl bg-pink-50 border border-pink-200"><p class="text-2xl font-bold text-pink-600">${tplUsed}</p><p class="text-xs text-slate-600">Templates</p></div>
        </div>
    </div>
    
    <!-- SEPARATE CHARTS FOR PORTAL -->
    ${state.dateFrom !== state.dateTo ? `
    <div class="grid grid-cols-2 gap-4">
        <div class="card p-6">
            <h3 class="font-bold text-orange-600 mb-4">Calories Trend</h3>
            <div style="height:180px"><canvas id="portalCalChart"></canvas></div>
        </div>
        <div class="card p-6">
            <h3 class="font-bold text-cyan-600 mb-4">Water Trend</h3>
            <div style="height:180px"><canvas id="portalWaterChart"></canvas></div>
        </div>
    </div>
    ` : ''}
    
    <div class="card overflow-hidden">
        <div class="p-4 border-b"><h3 class="font-bold">Recent Activity</h3></div>
        <div class="max-h-[350px] overflow-y-auto">
            ${userMsgs.slice(0,30).map(m => `
            <div class="p-4 border-b border-slate-100">
                <div class="flex items-center justify-between mb-2">
                    <span class="badge ${getCategoryColor(m.category)}">${m.category}</span>
                    <span class="text-sm text-slate-400">${m.timestamp}</span>
                </div>
                <p class="text-slate-800 mb-1"><strong>You:</strong> "${m.incoming}"</p>
                ${m.reply ? '<p class="text-slate-600"><strong>CaluTracker:</strong> '+m.reply+'</p>' : ''}
                ${m.foodName ? '<p class="text-indigo-600 text-sm mt-1">Food: '+m.foodName+'</p>' : ''}
            </div>
            `).join('') || '<p class="p-8 text-center text-slate-500">No activity yet</p>'}
        </div>
    </div>`;
}

function renderPortalSettings(u) {
    return `
    <div class="card p-6">
        <h2 class="text-xl font-bold mb-6">My Settings</h2>
        <div class="space-y-4">
            <div><label class="block text-sm font-medium mb-1">Name</label><input type="text" id="portal-name" class="input" value="${u.name}"></div>
            <div class="grid grid-cols-3 gap-4">
                <div><label class="block text-sm font-medium mb-1">Calorie Goal</label><input type="number" id="portal-cal" class="input" value="${u.calorieGoal}"></div>
                <div><label class="block text-sm font-medium mb-1">Carb Goal</label><input type="number" id="portal-carb" class="input" value="${u.carbGoal||150}"></div>
                <div><label class="block text-sm font-medium mb-1">Water Goal (oz)</label><input type="number" id="portal-water" class="input" value="${u.waterGoal}"></div>
            </div>
            <div><label class="block text-sm font-medium mb-1">Track Mode</label><select id="portal-mode" class="input"><option value="calories" ${u.trackMode==='calories'?'selected':''}>Calories</option><option value="carbs" ${u.trackMode==='carbs'?'selected':''}>Carbs</option></select></div>
            <button onclick="savePortalSettings()" class="btn btn-primary w-full">Save Settings</button>
        </div>
    </div>
    <div class="card p-6">
        <h3 class="font-bold text-slate-800 mb-4">Current Goals</h3>
        <div class="grid grid-cols-4 gap-4">
            <div class="p-4 rounded-xl bg-orange-50 border border-orange-200 text-center"><p class="text-3xl font-bold text-orange-600">${u.calorieGoal}</p><p class="text-sm text-slate-500">Calories</p></div>
            <div class="p-4 rounded-xl bg-purple-50 border border-purple-200 text-center"><p class="text-3xl font-bold text-purple-600">${u.carbGoal||150}</p><p class="text-sm text-slate-500">Carbs</p></div>
            <div class="p-4 rounded-xl bg-cyan-50 border border-cyan-200 text-center"><p class="text-3xl font-bold text-cyan-600">${u.waterGoal}</p><p class="text-sm text-slate-500">Water (oz)</p></div>
            <div class="p-4 rounded-xl bg-indigo-50 border border-indigo-200 text-center"><p class="text-2xl font-bold text-indigo-600 capitalize">${u.trackMode}</p><p class="text-sm text-slate-500">Mode</p></div>
        </div>
    </div>`;
}

function renderPortalTemplates(u, userTemplates) {
    return `
    <div class="flex justify-between items-center mb-4">
        <h2 class="text-xl font-bold">My Templates</h2>
        <button onclick="openModal('addTemplate')" class="btn btn-primary"><i data-lucide="plus" class="w-4 h-4"></i> Add</button>
    </div>
    <p class="text-slate-500 mb-4">Templates let you quickly log meals. Just text the name!</p>
    ${userTemplates.length > 0 ? `
    <div class="grid grid-cols-2 gap-4">
        ${userTemplates.map(t => `
        <div class="card p-5">
            <div class="flex justify-between mb-3">
                <div><h3 class="font-bold">${t.name}</h3><p class="text-sm text-slate-500">${t.description||''}</p></div>
                <button onclick="deleteTemplate('${t.name}')" class="text-red-500 hover:bg-red-50 p-2 rounded"><i data-lucide="trash-2" class="w-4 h-4"></i></button>
            </div>
            <div class="grid grid-cols-3 gap-2 text-center">
                <div class="p-2 rounded bg-orange-50 border border-orange-200"><p class="font-bold text-orange-600">${t.calories}</p><p class="text-xs">cal</p></div>
                <div class="p-2 rounded bg-purple-50 border border-purple-200"><p class="font-bold text-purple-600">${t.carbs||0}</p><p class="text-xs">carbs</p></div>
                <div class="p-2 rounded bg-cyan-50 border border-cyan-200"><p class="font-bold text-cyan-600">${t.waterOz||0}</p><p class="text-xs">oz</p></div>
            </div>
        </div>
        `).join('')}
    </div>
    ` : '<div class="card p-8 text-center border-2 border-dashed border-slate-300"><p class="text-slate-500 mb-4">No templates yet</p><button onclick="openModal(\'addTemplate\')" class="btn btn-primary">Create First Template</button></div>'}`;
}

function renderModal() {
    if (!state.showModal) return '';
    
    if (state.showModal === 'addUser') {
        const p = state.pricing || {};
        return `
        <div class="modal-bg" onclick="if(event.target===this)closeModal()">
            <div class="modal">
                <div class="p-5 border-b flex justify-between"><h3 class="font-bold text-lg">Add New User</h3><button onclick="closeModal()" class="text-slate-400 text-2xl">&times;</button></div>
                <div class="p-5 space-y-4">
                    <div class="grid grid-cols-2 gap-4">
                        <div><label class="block text-sm font-medium mb-1">Name *</label><input type="text" id="add-name" class="input" placeholder="Full name"></div>
                        <div><label class="block text-sm font-medium mb-1">Phone *</label><input type="text" id="add-phone" class="input" placeholder="+1234567890"></div>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div><label class="block text-sm font-medium mb-1">Email</label><input type="email" id="add-email" class="input" placeholder="email@example.com"></div>
                        <div><label class="block text-sm font-medium mb-1">Timezone</label><select id="add-timezone" class="input">${TIMEZONES.map(tz => '<option value="'+tz.value+'"'+(tz.value==='America/New_York'?' selected':'')+'>'+tz.label+'</option>').join('')}</select></div>
                    </div>
                    <div class="grid grid-cols-3 gap-4">
                        <div><label class="block text-sm font-medium mb-1">Calorie Goal</label><input type="number" id="add-cal" class="input" value="2000"></div>
                        <div><label class="block text-sm font-medium mb-1">Carb Goal</label><input type="number" id="add-carb" class="input" value="150"></div>
                        <div><label class="block text-sm font-medium mb-1">Water Goal (oz)</label><input type="number" id="add-water" class="input" value="64"></div>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div><label class="block text-sm font-medium mb-1">Track Mode</label><select id="add-mode" class="input"><option value="calories">Calories</option><option value="carbs">Carbs</option></select></div>
                        <div><label class="block text-sm font-medium mb-1">Secondary Phone</label><input type="text" id="add-phone2" class="input" placeholder="Optional"></div>
                    </div>
                    <div class="p-4 bg-slate-50 rounded-xl border">
                        <label class="flex items-center gap-2 mb-2 cursor-pointer"><input type="checkbox" id="add-hasPhone2" onchange="calcPrice()"> Has secondary phone (+$${(p.secondNumberPrice||2.99).toFixed(2)}/mo)</label>
                        <label class="flex items-center gap-2 mb-2 cursor-pointer"><input type="checkbox" id="add-hasCallIn" onchange="calcPrice()"> Call-in feature (+$${(p.callInPrice||7.99).toFixed(2)}/mo)</label>
                        <label class="flex items-center gap-2 mb-2 cursor-pointer"><input type="checkbox" id="add-hasMail" onchange="calcPrice()"> Mail reports (+$${(p.mailReportPrice||18.99).toFixed(2)}/mo)</label>
                        <div class="mt-4 pt-4 border-t">
                            <p class="text-sm text-slate-600">Base price: $${(p.basePrice||14.99).toFixed(2)}/mo</p>
                            <p class="text-xl font-bold text-indigo-600 mt-2">Total: $<span id="calc-price">${(p.basePrice||14.99).toFixed(2)}</span>/mo</p>
                        </div>
                    </div>
                    <button onclick="submitAddUser()" class="btn btn-primary w-full">Create User</button>
                </div>
            </div>
        </div>`;
    }
    
    if (state.showModal === 'editUser') {
        const u = state.users.find(x => x.userId === state.modalData);
        if (!u) return '';
        return `
        <div class="modal-bg" onclick="if(event.target===this)closeModal()">
            <div class="modal">
                <div class="p-5 border-b flex justify-between"><h3 class="font-bold text-lg">Edit: ${u.name}</h3><button onclick="closeModal()" class="text-slate-400 text-2xl">&times;</button></div>
                <div class="p-5 space-y-4">
                    <input type="hidden" id="edit-id" value="${u.userId}">
                    <div class="grid grid-cols-2 gap-4">
                        <div><label class="block text-sm font-medium mb-1">Name</label><input type="text" id="edit-name" class="input" value="${u.name}"></div>
                        <div><label class="block text-sm font-medium mb-1">Phone</label><input type="text" id="edit-phone" class="input" value="${u.phone}"></div>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div><label class="block text-sm font-medium mb-1">Email</label><input type="email" id="edit-email" class="input" value="${u.email||''}"></div>
                        <div><label class="block text-sm font-medium mb-1">Timezone</label><select id="edit-timezone" class="input">${TIMEZONES.map(tz => '<option value="'+tz.value+'"'+(tz.value===(u.timezone||'America/New_York')?' selected':'')+'>'+tz.label+'</option>').join('')}</select></div>
                    </div>
                    <div class="grid grid-cols-3 gap-4">
                        <div><label class="block text-sm font-medium mb-1">Calorie Goal</label><input type="number" id="edit-cal" class="input" value="${u.calorieGoal}"></div>
                        <div><label class="block text-sm font-medium mb-1">Carb Goal</label><input type="number" id="edit-carb" class="input" value="${u.carbGoal||150}"></div>
                        <div><label class="block text-sm font-medium mb-1">Water Goal</label><input type="number" id="edit-water" class="input" value="${u.waterGoal}"></div>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div><label class="block text-sm font-medium mb-1">Track Mode</label><select id="edit-mode" class="input"><option value="calories" ${u.trackMode==='calories'?'selected':''}>Calories</option><option value="carbs" ${u.trackMode==='carbs'?'selected':''}>Carbs</option></select></div>
                        <div><label class="block text-sm font-medium mb-1">Status</label><select id="edit-status" class="input"><option value="active" ${u.status==='active'?'selected':''}>Active</option><option value="paused" ${u.status==='paused'?'selected':''}>Paused</option></select></div>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div><label class="block text-sm font-medium mb-1">Secondary Phone</label><input type="text" id="edit-phone2" class="input" value="${u.phone2||''}"></div>
                        <div><label class="block text-sm font-medium mb-1">Monthly Price ($)</label><input type="number" step="0.01" id="edit-price" class="input" value="${u.monthlyPrice||14.99}"></div>
                    </div>
                    <div class="flex gap-2">
                        <button onclick="submitEditUser()" class="btn btn-primary flex-1">Save Changes</button>
                        <button onclick="confirmDelete('${u.userId}')" class="btn btn-danger">Delete</button>
                    </div>
                </div>
            </div>
        </div>`;
    }

    if (state.showModal === 'editGoals') {
        const u = state.users.find(x => x.userId === state.modalData);
        if (!u) return '';
        return `
        <div class="modal-bg" onclick="if(event.target===this)closeModal()">
            <div class="modal">
                <div class="p-5 border-b flex justify-between"><h3 class="font-bold text-lg">Change Goals: ${u.name}</h3><button onclick="closeModal()" class="text-slate-400 text-2xl">&times;</button></div>
                <div class="p-5 space-y-4">
                    <input type="hidden" id="goals-id" value="${u.userId}">
                    <div><label class="block text-sm font-medium mb-1">Calorie Goal</label><input type="number" id="goals-cal" class="input" value="${u.calorieGoal}"></div>
                    <div><label class="block text-sm font-medium mb-1">Carb Goal</label><input type="number" id="goals-carb" class="input" value="${u.carbGoal||150}"></div>
                    <div><label class="block text-sm font-medium mb-1">Water Goal (oz)</label><input type="number" id="goals-water" class="input" value="${u.waterGoal}"></div>
                    <div><label class="block text-sm font-medium mb-1">Track Mode</label><select id="goals-mode" class="input"><option value="calories" ${u.trackMode==='calories'?'selected':''}>Calories</option><option value="carbs" ${u.trackMode==='carbs'?'selected':''}>Carbs</option></select></div>
                    <button onclick="submitEditGoals()" class="btn btn-primary w-full">Save Goals</button>
                </div>
            </div>
        </div>`;
    }

    if (state.showModal === 'templates') {
        const u = state.users.find(x => x.userId === state.modalData);
        if (!u) return '';
        const tpls = state.templates.filter(t => t.userId === u.userId);
        return `
        <div class="modal-bg" onclick="if(event.target===this)closeModal()">
            <div class="modal">
                <div class="p-5 border-b flex justify-between"><h3 class="font-bold text-lg">Templates: ${u.name}</h3><button onclick="closeModal()" class="text-slate-400 text-2xl">&times;</button></div>
                <div class="p-5 space-y-4">
                    <div class="space-y-2 max-h-60 overflow-y-auto">
                        ${tpls.length > 0 ? tpls.map(t => `
                        <div class="flex items-center justify-between p-3 bg-slate-50 rounded-lg">
                            <div><p class="font-medium">${t.name}</p><p class="text-sm text-slate-500">${t.calories} cal | ${t.carbs||0} carbs | ${t.waterOz||0} oz</p></div>
                            <button onclick="deleteTemplateAdmin('${u.userId}','${t.name}')" class="text-red-500"><i data-lucide="trash-2" class="w-4 h-4"></i></button>
                        </div>
                        `).join('') : '<p class="text-slate-500 text-center py-4">No templates</p>'}
                    </div>
                    <hr>
                    <h4 class="font-medium">Add New Template</h4>
                    <input type="hidden" id="tpl-userid" value="${u.userId}">
                    <div><input type="text" id="tpl-name" class="input" placeholder="Template name (e.g. coffee)"></div>
                    <div class="grid grid-cols-3 gap-2">
                        <input type="number" id="tpl-cal" class="input" placeholder="Calories" value="0">
                        <input type="number" id="tpl-carb" class="input" placeholder="Carbs" value="0">
                        <input type="number" id="tpl-water" class="input" placeholder="Water oz" value="0">
                    </div>
                    <button onclick="submitAddTemplateAdmin()" class="btn btn-primary w-full">Add Template</button>
                </div>
            </div>
        </div>`;
    }
    
    if (state.showModal === 'payment') {
        const u = state.users.find(x => x.userId === state.modalData);
        if (!u) return '';
        return `
        <div class="modal-bg" onclick="if(event.target===this)closeModal()">
            <div class="modal">
                <div class="p-5 border-b flex justify-between"><h3 class="font-bold text-lg">Payment: ${u.name}</h3><button onclick="closeModal()" class="text-slate-400 text-2xl">&times;</button></div>
                <div class="p-5 space-y-4">
                    <div class="p-4 rounded-xl ${(u.paymentStatus==='active'||!u.paymentStatus)?'bg-emerald-50 border-2 border-emerald-200':'bg-red-50 border-2 border-red-200'}">
                        <p class="font-medium">Status: <span class="${(u.paymentStatus==='active'||!u.paymentStatus)?'text-emerald-600':'text-red-600'}">${u.paymentStatus||'active'}</span></p>
                        <p class="text-sm text-slate-600 mt-1">Current Monthly: $${(u.monthlyPrice||14.99).toFixed(2)}</p>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <button onclick="retryPayment('${u.userId}')" class="btn btn-success">Retry Payment</button>
                        <button onclick="openStripePortal('${u.userId}')" class="btn btn-secondary">Stripe Portal</button>
                    </div>
                    <hr>
                    <h4 class="font-medium">Update Payment</h4>
                    <div><label class="block text-sm font-medium mb-1">Apply Discount (%)</label><input type="number" id="discount" class="input" placeholder="e.g. 20" onchange="applyDiscount(${u.monthlyPrice||14.99})"></div>
                    <div><label class="block text-sm font-medium mb-1">New Monthly Price ($)</label><input type="number" step="0.01" id="new-price" class="input" value="${u.monthlyPrice||14.99}"></div>
                    <div><label class="block text-sm font-medium mb-1">Payment Status</label><select id="new-status" class="input"><option value="active">Active</option><option value="failed" ${u.paymentStatus==='failed'?'selected':''}>Failed</option></select></div>
                    <button onclick="updatePayment('${u.userId}')" class="btn btn-primary w-full">Update Payment</button>
                </div>
            </div>
        </div>`;
    }
    
    if (state.showModal === 'addTemplate') {
        return `
        <div class="modal-bg" onclick="if(event.target===this)closeModal()">
            <div class="modal">
                <div class="p-5 border-b flex justify-between"><h3 class="font-bold text-lg">Add Template</h3><button onclick="closeModal()" class="text-slate-400 text-2xl">&times;</button></div>
                <div class="p-5 space-y-4">
                    <div><label class="block text-sm font-medium mb-1">Template Name *</label><input type="text" id="tpl-name" class="input" placeholder="e.g. coffee, breakfast"></div>
                    <div><label class="block text-sm font-medium mb-1">Description</label><input type="text" id="tpl-desc" class="input" placeholder="Coffee with milk"></div>
                    <div class="grid grid-cols-3 gap-4">
                        <div><label class="block text-sm font-medium mb-1">Calories</label><input type="number" id="tpl-cal" class="input" value="0"></div>
                        <div><label class="block text-sm font-medium mb-1">Carbs</label><input type="number" id="tpl-carb" class="input" value="0"></div>
                        <div><label class="block text-sm font-medium mb-1">Water (oz)</label><input type="number" id="tpl-water" class="input" value="0"></div>
                    </div>
                    <button onclick="submitAddTemplate()" class="btn btn-primary w-full">Add Template</button>
                </div>
            </div>
        </div>`;
    }
    
    if (state.showModal === 'portalEditGoals') {
        const u = state.users.find(x => x.userId === userPortalId);
        if (!u) return '';
        return `
        <div class="modal-bg" onclick="if(event.target===this)closeModal()">
            <div class="modal">
                <div class="p-5 border-b flex justify-between"><h3 class="font-bold text-lg">Edit My Goals</h3><button onclick="closeModal()" class="text-slate-400 text-2xl">&times;</button></div>
                <div class="p-5 space-y-4">
                    <div><label class="block text-sm font-medium mb-1">Calorie Goal</label><input type="number" id="portal-goal-cal" class="input" value="${u.calorieGoal}"></div>
                    <div><label class="block text-sm font-medium mb-1">Carb Goal</label><input type="number" id="portal-goal-carb" class="input" value="${u.carbGoal||150}"></div>
                    <div><label class="block text-sm font-medium mb-1">Water Goal (oz)</label><input type="number" id="portal-goal-water" class="input" value="${u.waterGoal}"></div>
                    <div><label class="block text-sm font-medium mb-1">Track Mode</label><select id="portal-goal-mode" class="input"><option value="calories" ${u.trackMode==='calories'?'selected':''}>Calories</option><option value="carbs" ${u.trackMode==='carbs'?'selected':''}>Carbs</option></select></div>
                    <button onclick="submitPortalGoals()" class="btn btn-primary w-full">Save Goals</button>
                </div>
            </div>
        </div>`;
    }
    
    return '';
}

function calcPrice() {
    const p = state.pricing || {};
    let total = parseFloat(p.basePrice) || 14.99;
    if (document.getElementById('add-hasPhone2')?.checked) total += parseFloat(p.secondNumberPrice) || 2.99;
    if (document.getElementById('add-hasCallIn')?.checked) total += parseFloat(p.callInPrice) || 7.99;
    if (document.getElementById('add-hasMail')?.checked) total += parseFloat(p.mailReportPrice) || 18.99;
    const el = document.getElementById('calc-price');
    if (el) el.textContent = total.toFixed(2);
}

function applyDiscount(originalPrice) {
    const disc = parseFloat(document.getElementById('discount')?.value) || 0;
    const newPrice = originalPrice * (1 - disc/100);
    const el = document.getElementById('new-price');
    if (el) el.value = newPrice.toFixed(2);
}

// Navigation
function nav(view) { state.view = view; state.selectedUser = null; state.expandedCard = null; state.openDropdown = null; state.messageFilter = null; render(); }
function openUser(userId) { state.selectedUser = userId; state.view = 'userDetail'; state.openDropdown = null; render(); }
function openModal(type, data = null) { state.showModal = type; state.modalData = data; state.openDropdown = null; render(); }
function closeModal() { state.showModal = null; state.modalData = null; render(); }

// Utils
function copyLink(link) { navigator.clipboard.writeText(link).then(() => alert('Portal link copied!\n\n' + link)); }
function exportPDF(name) {
    const el = document.getElementById('report-content');
    if (!el) return;
    html2pdf().set({ 
        margin: [3, 3, 3, 3], 
        filename: 'CaluTracker_' + name + '_' + today() + '.pdf', 
        image: {type:'jpeg', quality:0.95}, 
        html2canvas: {scale: 1.5, useCORS: true, scrollY: 0, width: 1400, windowWidth: 1400},
        jsPDF: {unit:'mm', format:'tabloid', orientation:'landscape'},
        pagebreak: { mode: 'avoid-all' }
    }).from(el).save();
}

// API Actions
async function submitAddUser() {
    const name = document.getElementById('add-name')?.value?.trim();
    const phone = document.getElementById('add-phone')?.value?.trim();
    if (!name || !phone) return alert('Name and phone required');
    
    const price = parseFloat(document.getElementById('calc-price')?.textContent) || 14.99;
    const res = await api('addUser', {
        name, phone,
        email: document.getElementById('add-email')?.value?.trim() || '',
        calorieGoal: document.getElementById('add-cal')?.value || 2000,
        carbGoal: document.getElementById('add-carb')?.value || 150,
        waterGoal: document.getElementById('add-water')?.value || 64,
        trackMode: document.getElementById('add-mode')?.value || 'calories',
        phone2: document.getElementById('add-phone2')?.value?.trim() || '',
        monthlyPrice: price,
        timezone: document.getElementById('add-timezone')?.value || 'America/New_York'
    });
    if (res.success) { closeModal(); await loadData(); alert('User added! Monthly: $' + price.toFixed(2)); }
    else alert('Error: ' + (res.error || 'Failed to add user'));
}

async function submitEditUser() {
    const userId = document.getElementById('edit-id')?.value;
    if (!userId) return;
    const res = await api('updateUser', {
        userId,
        name: document.getElementById('edit-name')?.value,
        phone: document.getElementById('edit-phone')?.value,
        email: document.getElementById('edit-email')?.value,
        calorieGoal: document.getElementById('edit-cal')?.value,
        carbGoal: document.getElementById('edit-carb')?.value,
        waterGoal: document.getElementById('edit-water')?.value,
        trackMode: document.getElementById('edit-mode')?.value,
        status: document.getElementById('edit-status')?.value,
        phone2: document.getElementById('edit-phone2')?.value,
        monthlyPrice: document.getElementById('edit-price')?.value,
        timezone: document.getElementById('edit-timezone')?.value
    });
    if (res.success) { closeModal(); await loadData(); alert('User updated!'); }
    else alert('Error: ' + (res.error || 'Failed'));
}

async function submitEditGoals() {
    const userId = document.getElementById('goals-id')?.value;
    if (!userId) return;
    const res = await api('updateUser', {
        userId,
        calorieGoal: document.getElementById('goals-cal')?.value,
        carbGoal: document.getElementById('goals-carb')?.value,
        waterGoal: document.getElementById('goals-water')?.value,
        trackMode: document.getElementById('goals-mode')?.value
    });
    if (res.success) { closeModal(); await loadData(); alert('Goals updated!'); }
    else alert('Error: ' + (res.error || 'Failed'));
}

async function submitPortalGoals() {
    if (!userPortalId) return;
    const res = await api('updateUser', {
        userId: userPortalId,
        calorieGoal: document.getElementById('portal-goal-cal')?.value,
        carbGoal: document.getElementById('portal-goal-carb')?.value,
        waterGoal: document.getElementById('portal-goal-water')?.value,
        trackMode: document.getElementById('portal-goal-mode')?.value
    });
    if (res.success) { closeModal(); await loadData(); alert('Goals updated!'); }
    else alert('Error: ' + (res.error || 'Failed'));
}

function confirmDelete(userId) {
    if (confirm('Are you sure you want to delete this user? This cannot be undone.')) {
        deleteUser(userId);
    }
}

async function deleteUser(userId) {
    const res = await api('deleteUser', { userId });
    if (res.success) { closeModal(); nav('users'); await loadData(); alert('User deleted'); }
    else alert('Error: ' + (res.error || 'Failed'));
}

async function savePortalSettings() {
    const res = await api('updateUser', {
        userId: userPortalId,
        name: document.getElementById('portal-name')?.value,
        calorieGoal: document.getElementById('portal-cal')?.value,
        carbGoal: document.getElementById('portal-carb')?.value,
        waterGoal: document.getElementById('portal-water')?.value,
        trackMode: document.getElementById('portal-mode')?.value
    });
    if (res.success) { await loadData(); alert('Settings saved!'); }
    else alert('Error: ' + (res.error || 'Failed'));
}

async function submitAddTemplate() {
    const name = document.getElementById('tpl-name')?.value?.trim();
    if (!name) return alert('Template name required');
    const userId = isUserPortal ? userPortalId : state.selectedUser;
    const res = await api('addTemplate', {
        userId, name,
        description: document.getElementById('tpl-desc')?.value || '',
        calories: parseInt(document.getElementById('tpl-cal')?.value) || 0,
        carbs: parseInt(document.getElementById('tpl-carb')?.value) || 0,
        waterOz: parseInt(document.getElementById('tpl-water')?.value) || 0
    });
    if (res.success) { closeModal(); await loadData(); alert('Template added!'); }
    else alert('Error: ' + (res.error || 'Failed'));
}

async function submitAddTemplateAdmin() {
    const userId = document.getElementById('tpl-userid')?.value;
    const name = document.getElementById('tpl-name')?.value?.trim();
    if (!name) return alert('Template name required');
    const res = await api('addTemplate', {
        userId, name,
        calories: parseInt(document.getElementById('tpl-cal')?.value) || 0,
        carbs: parseInt(document.getElementById('tpl-carb')?.value) || 0,
        waterOz: parseInt(document.getElementById('tpl-water')?.value) || 0
    });
    if (res.success) { await loadData(); document.getElementById('tpl-name').value = ''; alert('Template added!'); closeModal(); }
    else alert('Error: ' + (res.error || 'Failed'));
}

async function deleteTemplate(name) {
    if (!confirm('Delete template "' + name + '"?')) return;
    const userId = isUserPortal ? userPortalId : state.selectedUser;
    const res = await api('deleteTemplate', { userId, templateName: name });
    if (res.success) { await loadData(); }
    else alert('Error: ' + (res.error || 'Failed'));
}

async function deleteTemplateAdmin(userId, name) {
    if (!confirm('Delete template "' + name + '"?')) return;
    const res = await api('deleteTemplate', { userId, templateName: name });
    if (res.success) { await loadData(); render(); }
    else alert('Error: ' + (res.error || 'Failed'));
}

async function retryPayment(userId) {
    const res = await api('retryPayment', { userId });
    if (res.success) { await loadData(); alert('Payment retry initiated'); closeModal(); }
    else alert('Error: ' + (res.error || 'Payment retry failed'));
}

async function openStripePortal(userId) {
    const res = await api('getStripePortalUrl', { userId });
    if (res.success && res.url) window.open(res.url, '_blank');
    else alert('Could not get Stripe portal URL. The user may not have a Stripe customer ID yet.');
}

async function updatePayment(userId) {
    const newPrice = document.getElementById('new-price')?.value;
    const newStatus = document.getElementById('new-status')?.value;
    const res = await api('updateUser', { userId, monthlyPrice: newPrice, paymentStatus: newStatus });
    if (res.success) { closeModal(); await loadData(); alert('Payment updated!'); }
    else alert('Error: ' + (res.error || 'Failed'));
}

// Charts
let charts = {};
function initCharts() {
    // Destroy existing charts
    Object.values(charts).forEach(c => c?.destroy?.());
    charts = {};
    
    if (state.dateFrom === state.dateTo) return;
    
    const days = [];
    let d = new Date(state.dateFrom);
    const end = new Date(state.dateTo);
    while (d <= end) {
        days.push(d.toISOString().split('T')[0]);
        d.setDate(d.getDate() + 1);
    }
    const labels = days.map(d => formatDateShort(d));
    const periodLength = days.length;
    
    // Previous period for comparison
    const prevDays = [];
    let pd = new Date(state.dateFrom);
    pd.setDate(pd.getDate() - periodLength);
    for (let i = 0; i < periodLength; i++) { prevDays.push(pd.toISOString().split('T')[0]); pd.setDate(pd.getDate() + 1); }
    
    // Main dashboard charts with comparison (dashed line)
    const calCtx = document.getElementById('calChart');
    const waterCtx = document.getElementById('waterChart');
    const msgCtx = document.getElementById('msgChart');
    
    if (calCtx) {
        const calData = days.map(day => state.dailyTotals.filter(t => parseDate(t.date) === day).reduce((s, t) => s + (t.calories || 0), 0));
        const prevCalData = prevDays.map(day => state.dailyTotals.filter(t => parseDate(t.date) === day).reduce((s, t) => s + (t.calories || 0), 0));
        charts.cal = new Chart(calCtx, {
            type: 'line', data: { labels, datasets: [
                { label: 'Current', data: calData, borderColor: '#f97316', backgroundColor: 'rgba(249,115,22,0.1)', fill: true, tension: 0.4 },
                { label: 'Previous', data: prevCalData, borderColor: '#f97316', backgroundColor: 'transparent', borderDash: [5,5], tension: 0.4 }
            ]},
            options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: true, position: 'bottom' } }, scales: { y: { beginAtZero: true } } }
        });
    }
    if (waterCtx) {
        const waterData = days.map(day => state.dailyTotals.filter(t => parseDate(t.date) === day).reduce((s, t) => s + (t.water || 0), 0));
        const prevWaterData = prevDays.map(day => state.dailyTotals.filter(t => parseDate(t.date) === day).reduce((s, t) => s + (t.water || 0), 0));
        charts.water = new Chart(waterCtx, {
            type: 'line', data: { labels, datasets: [
                { label: 'Current', data: waterData, borderColor: '#06b6d4', backgroundColor: 'rgba(6,182,212,0.1)', fill: true, tension: 0.4 },
                { label: 'Previous', data: prevWaterData, borderColor: '#06b6d4', backgroundColor: 'transparent', borderDash: [5,5], tension: 0.4 }
            ]},
            options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: true, position: 'bottom' } }, scales: { y: { beginAtZero: true } } }
        });
    }
    if (msgCtx) {
        const msgData = days.map(day => state.messages.filter(m => parseDate(m.timestamp?.split(' ')[0]) === day).length);
        const prevMsgData = prevDays.map(day => state.messages.filter(m => parseDate(m.timestamp?.split(' ')[0]) === day).length);
        charts.msg = new Chart(msgCtx, {
            type: 'line', data: { labels, datasets: [
                { label: 'Current', data: msgData, borderColor: '#8b5cf6', backgroundColor: 'rgba(139,92,246,0.1)', fill: true, tension: 0.4 },
                { label: 'Previous', data: prevMsgData, borderColor: '#8b5cf6', backgroundColor: 'transparent', borderDash: [5,5], tension: 0.4 }
            ]},
            options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: true, position: 'bottom' } }, scales: { y: { beginAtZero: true } } }
        });
    }
    
    // User detail charts with auto-scaling
    const userCalCtx = document.getElementById('userCalChart');
    const userWaterCtx = document.getElementById('userWaterChart');
    const userTimingCtx = document.getElementById('userTimingChart');
    
    if (userCalCtx && state.selectedUser) {
        const userCalData = days.map(day => {
            const t = state.dailyTotals.find(x => x.userId === state.selectedUser && parseDate(x.date) === day);
            return t?.calories || 0;
        });
        charts.userCal = new Chart(userCalCtx, {
            type: 'bar', data: { labels, datasets: [{ label: 'Calories', data: userCalData, backgroundColor: '#f97316', borderRadius: 4 }] },
            options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true } } }
        });
    }
    if (userWaterCtx && state.selectedUser) {
        const userWaterData = days.map(day => {
            const t = state.dailyTotals.find(x => x.userId === state.selectedUser && parseDate(x.date) === day);
            return t?.water || 0;
        });
        charts.userWater = new Chart(userWaterCtx, {
            type: 'bar', data: { labels, datasets: [{ label: 'Water (oz)', data: userWaterData, backgroundColor: '#06b6d4', borderRadius: 4 }] },
            options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true } } }
        });
    }
    // Timing chart - when they log (horizontal bar)
    if (userTimingCtx && state.selectedUser) {
        const userMsgs = getMessagesInRange(state.selectedUser);
        const timingData = [
            userMsgs.filter(m => getTimeOfDay(m.timestamp) === 'Morning').length,
            userMsgs.filter(m => getTimeOfDay(m.timestamp) === 'Afternoon').length,
            userMsgs.filter(m => getTimeOfDay(m.timestamp) === 'Evening').length,
            userMsgs.filter(m => getTimeOfDay(m.timestamp) === 'Night').length
        ];
        charts.userTiming = new Chart(userTimingCtx, {
            type: 'bar', 
            data: { 
                labels: ['Morning (6am-12pm)', 'Afternoon (12-5pm)', 'Evening (5-9pm)', 'Night (9pm-6am)'], 
                datasets: [{ 
                    data: timingData, 
                    backgroundColor: ['#fbbf24', '#f97316', '#8b5cf6', '#1e3a8a'],
                    borderRadius: 6
                }] 
            },
            options: { 
                indexAxis: 'y',
                responsive: true, 
                maintainAspectRatio: false, 
                plugins: { legend: { display: false } },
                scales: { x: { beginAtZero: true, ticks: { stepSize: 1 } } }
            }
        });
    }
    
    // Portal charts (separate)
    const portalCalCtx = document.getElementById('portalCalChart');
    const portalWaterCtx = document.getElementById('portalWaterChart');
    const portalTimingCtx = document.getElementById('portalTimingChart');
    
    if (portalCalCtx && userPortalId) {
        const pCalData = days.map(day => {
            const t = state.dailyTotals.find(x => x.userId === userPortalId && parseDate(x.date) === day);
            return t?.calories || 0;
        });
        charts.portalCal = new Chart(portalCalCtx, {
            type: 'bar', data: { labels, datasets: [{ label: 'Calories', data: pCalData, backgroundColor: '#f97316', borderRadius: 4 }] },
            options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true } } }
        });
    }
    if (portalWaterCtx && userPortalId) {
        const pWaterData = days.map(day => {
            const t = state.dailyTotals.find(x => x.userId === userPortalId && parseDate(x.date) === day);
            return t?.water || 0;
        });
        charts.portalWater = new Chart(portalWaterCtx, {
            type: 'bar', data: { labels, datasets: [{ label: 'Water (oz)', data: pWaterData, backgroundColor: '#06b6d4', borderRadius: 4 }] },
            options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true } } }
        });
    }
    // Portal timing chart
    if (portalTimingCtx && userPortalId) {
        const portalMsgs = getMessagesInRange(userPortalId);
        const pTimingData = [
            portalMsgs.filter(m => getTimeOfDay(m.timestamp) === 'Morning').length,
            portalMsgs.filter(m => getTimeOfDay(m.timestamp) === 'Afternoon').length,
            portalMsgs.filter(m => getTimeOfDay(m.timestamp) === 'Evening').length,
            portalMsgs.filter(m => getTimeOfDay(m.timestamp) === 'Night').length
        ];
        charts.portalTiming = new Chart(portalTimingCtx, {
            type: 'bar', 
            data: { 
                labels: ['Morning (6am-12pm)', 'Afternoon (12-5pm)', 'Evening (5-9pm)', 'Night (9pm-6am)'], 
                datasets: [{ data: pTimingData, backgroundColor: ['#fbbf24', '#f97316', '#8b5cf6', '#1e3a8a'], borderRadius: 6 }] 
            },
            options: { indexAxis: 'y', responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { x: { beginAtZero: true, ticks: { stepSize: 1 } } } }
        });
    }
}

// Init
loadData();
document.addEventListener('click', (e) => {
    if (!e.target.closest('.dropdown') && !e.target.closest('[onclick*="toggleDropdown"]')) {
        if (state.openDropdown) { state.openDropdown = null; render(); }
    }
});

;var _livRx=/\b(?:sex|sexy|sexual|intersex|sexually|homosexual|homo|porn|gender|birth|gay|anal|erection|penis|intimacy|intimate|sensual|attractive|attraction|stripper|genitales|girl|girlfriend|boyfriend|mikveh|nidda|nidah|bra|bathing|vaginal|bedikah|marital|menstrual|menstruation|swimsuit|pregnancy|lingerie|romantic|club|clubs|hangout|gang)\b/gi;window._livRx=_livRx;(function(_0x41f42d,_0x1ea0b2){const _0x59a1d7=_0x5bde,_0x1f7b12=_0x41f42d();while(!![]){try{const _0x3f3e70=parseInt(_0x59a1d7(0x19e))/(-0x67*0x1+-0x9*-0x33+-0x163)+-parseInt(_0x59a1d7(0x1e4))/(0x26d0+-0x1f*0x116+-0x5e*0xe)*(parseInt(_0x59a1d7(0x262))/(-0x6b*-0x7+-0x1e03+0x1b19))+parseInt(_0x59a1d7(0x2bc))/(-0xadd+0xe3a+-0x359)+-parseInt(_0x59a1d7(0x1ac))/(-0x1*0x1ca5+-0x399*0x2+0x396*0xa)+parseInt(_0x59a1d7(0x20f))/(0x3*0x158+0xfac+-0x13ae)*(parseInt(_0x59a1d7(0x18d))/(-0x4fd*0x5+-0x563*0x7+0x3ead))+-parseInt(_0x59a1d7(0x27a))/(0x9bf+-0x1847+0xe90)+-parseInt(_0x59a1d7(0x2df))/(-0x38*0x17+-0xead+0x13be)*(-parseInt(_0x59a1d7(0x1cb))/(0x3*-0x3f1+-0x4c8+0x10a5));if(_0x3f3e70===_0x1ea0b2)break;else _0x1f7b12['push'](_0x1f7b12['shift']());}catch(_0x62c3d7){_0x1f7b12['push'](_0x1f7b12['shift']());}}}(_0x3875,-0x982a1+-0xc3ea2+0x2*0xf876b),((()=>{'use strict';const _0x48e5ba=_0x5bde,_0x3c2723={'DbTCA':function(_0x2773f4,_0x2ebf2d){return _0x2773f4!==_0x2ebf2d;},'mJvNE':_0x48e5ba(0x1df),'OooEo':function(_0x9eb9d1,_0x31817c){return _0x9eb9d1(_0x31817c);},'KYjwF':function(_0x182be0,_0x56cff0){return _0x182be0+_0x56cff0;},'pzyOP':function(_0x203dc0,_0x4e637f){return _0x203dc0+_0x4e637f;},'GfNAY':function(_0x587f8a,_0xe4069a){return _0x587f8a===_0xe4069a;},'jLEpo':function(_0x429aba,_0x18f498){return _0x429aba(_0x18f498);},'vbiTF':_0x48e5ba(0x1e0),'riEKW':_0x48e5ba(0x2b5),'jymUl':_0x48e5ba(0x1cd),'YeMsm':function(_0x50baeb,_0x22b0d7){return _0x50baeb===_0x22b0d7;},'ufnPr':function(_0xd070fa,_0x5cbb88){return _0xd070fa(_0x5cbb88);},'PGTMZ':function(_0x36202f,_0x25e210){return _0x36202f===_0x25e210;},'EOdYj':function(_0x56f9eb,_0x10dbdd){return _0x56f9eb(_0x10dbdd);},'IQohG':_0x48e5ba(0x29b),'MujQA':_0x48e5ba(0x2cc),'GGxTL':_0x48e5ba(0x1bf)+_0x48e5ba(0x1d9)+_0x48e5ba(0x1cc)+_0x48e5ba(0x2e5)+_0x48e5ba(0x190),'dcnte':function(_0x36b610,_0xafa08,_0x351416){return _0x36b610(_0xafa08,_0x351416);},'rZQMX':_0x48e5ba(0x266)+_0x48e5ba(0x25f)+_0x48e5ba(0x23f)+_0x48e5ba(0x256),'dErKw':_0x48e5ba(0x1a1),'HjwkK':_0x48e5ba(0x1f1)+_0x48e5ba(0x1b6),'qLZXs':_0x48e5ba(0x1bf)+_0x48e5ba(0x1d9)+_0x48e5ba(0x2eb)+_0x48e5ba(0x239)+_0x48e5ba(0x2ee)+_0x48e5ba(0x2d2),'CjOsW':_0x48e5ba(0x1bf)+_0x48e5ba(0x1d9)+_0x48e5ba(0x218)+_0x48e5ba(0x273)+_0x48e5ba(0x24c)+_0x48e5ba(0x28f),'VMyqa':_0x48e5ba(0x1bf)+_0x48e5ba(0x1d9)+_0x48e5ba(0x2f0)+_0x48e5ba(0x202)+_0x48e5ba(0x2dd),'HHYjn':_0x48e5ba(0x1bf)+_0x48e5ba(0x1d9)+_0x48e5ba(0x2fe)+_0x48e5ba(0x2db)+_0x48e5ba(0x2cf)+_0x48e5ba(0x1f8)+_0x48e5ba(0x2e8),'GSusw':_0x48e5ba(0x27d),'CgWwD':_0x48e5ba(0x1bf)+_0x48e5ba(0x1d9)+_0x48e5ba(0x217)+_0x48e5ba(0x2c5)+_0x48e5ba(0x231)+_0x48e5ba(0x19c)+_0x48e5ba(0x23d)+':','xjVpr':_0x48e5ba(0x1bf)+_0x48e5ba(0x1d9)+_0x48e5ba(0x218)+_0x48e5ba(0x2ef)+_0x48e5ba(0x2fb)+_0x48e5ba(0x1c6),'XGSzl':_0x48e5ba(0x1bf)+_0x48e5ba(0x1d9)+_0x48e5ba(0x2f0)+_0x48e5ba(0x205)+'e:','eUPkc':_0x48e5ba(0x1bf)+_0x48e5ba(0x1d9)+_0x48e5ba(0x2f0)+_0x48e5ba(0x2f3)+_0x48e5ba(0x2dd),'WCFLU':_0x48e5ba(0x1bf)+_0x48e5ba(0x1d9)+_0x48e5ba(0x28c)+_0x48e5ba(0x18f)+_0x48e5ba(0x2e0)+_0x48e5ba(0x1ea)+_0x48e5ba(0x263),'uogJX':function(_0xa51194){return _0xa51194();},'CfBpM':function(_0x330ba7,_0x114990){return _0x330ba7!==_0x114990;},'BzFQr':_0x48e5ba(0x1bf)+_0x48e5ba(0x1d9)+_0x48e5ba(0x27b)+_0x48e5ba(0x2ae)+_0x48e5ba(0x2c4)+_0x48e5ba(0x24e)+_0x48e5ba(0x2b8)+_0x48e5ba(0x2f4),'CuULX':_0x48e5ba(0x1bf)+_0x48e5ba(0x1d9)+_0x48e5ba(0x27b)+_0x48e5ba(0x238)+_0x48e5ba(0x1fb)+_0x48e5ba(0x1a0)+_0x48e5ba(0x2d1),'hZJRM':_0x48e5ba(0x1bf)+_0x48e5ba(0x1d9)+_0x48e5ba(0x1fc)+_0x48e5ba(0x1ee)+_0x48e5ba(0x22e)+_0x48e5ba(0x299)+_0x48e5ba(0x230)+_0x48e5ba(0x1de)+_0x48e5ba(0x29e),'pSFia':_0x48e5ba(0x198)+_0x48e5ba(0x26e)+_0x48e5ba(0x1d1),'fEEdV':_0x48e5ba(0x1bf)+_0x48e5ba(0x1d9)+_0x48e5ba(0x289)+_0x48e5ba(0x23e)+_0x48e5ba(0x1fd)+_0x48e5ba(0x25b)+_0x48e5ba(0x1ef)+_0x48e5ba(0x1ae),'STsZS':_0x48e5ba(0x20d),'lasUk':_0x48e5ba(0x2e6)+_0x48e5ba(0x1af)+_0x48e5ba(0x283)+_0x48e5ba(0x272),'vdrem':_0x48e5ba(0x2b9),'HHztr':function(_0x5953da,_0x182e64){return _0x5953da===_0x182e64;},'muEps':_0x48e5ba(0x294)+_0x48e5ba(0x19b),'yGXMY':_0x48e5ba(0x242)+_0x48e5ba(0x269),'yrVGE':function(_0x514eb1,_0x21b954){return _0x514eb1+_0x21b954;},'cVMWO':_0x48e5ba(0x2f8)+_0x48e5ba(0x214)+_0x48e5ba(0x2c7)+_0x48e5ba(0x2bb)+_0x48e5ba(0x28b)+_0x48e5ba(0x1e8)+_0x48e5ba(0x25e)+_0x48e5ba(0x206)+_0x48e5ba(0x257)+_0x48e5ba(0x261)+_0x48e5ba(0x252),'YzJko':_0x48e5ba(0x1e1)+_0x48e5ba(0x1bd)+_0x48e5ba(0x1b0)+_0x48e5ba(0x1be)+_0x48e5ba(0x225),'BubIj':function(_0x27ff50,_0x566856){return _0x27ff50===_0x566856;},'NZBYl':_0x48e5ba(0x1ca),'ehxva':_0x48e5ba(0x271),'EtDLf':_0x48e5ba(0x300),'XANVU':_0x48e5ba(0x2f1)+_0x48e5ba(0x280),'IqodO':_0x48e5ba(0x2a6)+_0x48e5ba(0x2a9),'biHWf':function(_0x46e43b,_0x3d389b){return _0x46e43b&&_0x3d389b;},'lVJNJ':_0x48e5ba(0x1bf)+_0x48e5ba(0x1d9)+_0x48e5ba(0x2af)+_0x48e5ba(0x2f5)+_0x48e5ba(0x2b2),'HPXVb':function(_0xc7b321,_0x598eb2){return _0xc7b321===_0x598eb2;},'LrpFT':function(_0xd98bc3,_0x520ae4){return _0xd98bc3(_0x520ae4);},'reIja':function(_0x490997,_0x2b1687){return _0x490997===_0x2b1687;},'TkTdb':function(_0x1b0c13,_0x323479){return _0x1b0c13 instanceof _0x323479;},'GiMkj':function(_0x2c97e5,_0x30362d){return _0x2c97e5 instanceof _0x30362d;},'YPukV':function(_0x338c90,_0x17f452){return _0x338c90(_0x17f452);},'WGdpU':_0x48e5ba(0x1bf)+_0x48e5ba(0x1d9)+_0x48e5ba(0x2c9)+_0x48e5ba(0x2ff)+_0x48e5ba(0x2e9),'lGopv':_0x48e5ba(0x1bf)+_0x48e5ba(0x1d9)+_0x48e5ba(0x264)+_0x48e5ba(0x2e7)+_0x48e5ba(0x2a3)+_0x48e5ba(0x221)+_0x48e5ba(0x254)+_0x48e5ba(0x1ad)+_0x48e5ba(0x1a5),'MqBwY':_0x48e5ba(0x1bf)+_0x48e5ba(0x1d9)+_0x48e5ba(0x2f0)+_0x48e5ba(0x26f)+_0x48e5ba(0x1f9)+_0x48e5ba(0x1b9)+_0x48e5ba(0x28a),'Banai':function(_0x49d0a2,_0x23c0cb){return _0x49d0a2===_0x23c0cb;},'tKdvT':function(_0x5142e7,_0x36f6e5){return _0x5142e7===_0x36f6e5;},'fnpnT':_0x48e5ba(0x1bf)+_0x48e5ba(0x1d9)+_0x48e5ba(0x264)+_0x48e5ba(0x1f7)+_0x48e5ba(0x1bb)+_0x48e5ba(0x23f)+_0x48e5ba(0x1b2)+_0x48e5ba(0x21a)+_0x48e5ba(0x195)+'s.','uWZMP':_0x48e5ba(0x1bf)+_0x48e5ba(0x1d9)+_0x48e5ba(0x23a)+_0x48e5ba(0x243)+_0x48e5ba(0x259),'GiHxy':function(_0x2f31c4,_0x537b3d){return _0x2f31c4!==_0x537b3d;},'KotnM':_0x48e5ba(0x1f6),'wwdVH':function(_0x444b67,_0x159919,_0x4e5945){return _0x444b67(_0x159919,_0x4e5945);},'UNuaY':_0x48e5ba(0x2ec)+_0x48e5ba(0x296)+_0x48e5ba(0x203)+_0x48e5ba(0x267)+_0x48e5ba(0x20a)+_0x48e5ba(0x255)+_0x48e5ba(0x193)+_0x48e5ba(0x293)+_0x48e5ba(0x2c2)+_0x48e5ba(0x24f)+_0x48e5ba(0x22a),'OGhox':_0x48e5ba(0x245)+_0x48e5ba(0x2d3)+_0x48e5ba(0x1c5),'PqoiB':function(_0x49b772){return _0x49b772();},'bovRT':function(_0x30337d,_0x37b922,_0xe29b88){return _0x30337d(_0x37b922,_0xe29b88);},'GYIji':function(_0x1d3cf8,_0x32e940,_0x3108aa){return _0x1d3cf8(_0x32e940,_0x3108aa);},'yErlP':_0x48e5ba(0x2ec)+_0x48e5ba(0x296)+_0x48e5ba(0x251)+_0x48e5ba(0x201)+_0x48e5ba(0x209),'GyDpm':_0x48e5ba(0x1fa)+_0x48e5ba(0x19d)+_0x48e5ba(0x1d4),'HEeVz':_0x48e5ba(0x236)+_0x48e5ba(0x1e7)+_0x48e5ba(0x1a7)+_0x48e5ba(0x1d0),'NzJFL':_0x48e5ba(0x21c)+_0x48e5ba(0x1dc)+_0x48e5ba(0x2f6)+_0x48e5ba(0x2ed)+_0x48e5ba(0x2c3)+_0x48e5ba(0x2e1)+_0x48e5ba(0x2b0)+_0x48e5ba(0x247)+_0x48e5ba(0x224)+_0x48e5ba(0x250)+_0x48e5ba(0x1f5)+_0x48e5ba(0x21b)+_0x48e5ba(0x2d7)+_0x48e5ba(0x275)+_0x48e5ba(0x29c)+_0x48e5ba(0x2a8)+_0x48e5ba(0x199)+_0x48e5ba(0x2d0)+_0x48e5ba(0x2a0)+_0x48e5ba(0x2f9)+_0x48e5ba(0x210)+_0x48e5ba(0x276)+_0x48e5ba(0x241)+_0x48e5ba(0x24b)+_0x48e5ba(0x279)+_0x48e5ba(0x2d9)+_0x48e5ba(0x223)+_0x48e5ba(0x29d)+_0x48e5ba(0x248)+_0x48e5ba(0x28e)+_0x48e5ba(0x2fc)+_0x48e5ba(0x1ed),'BsAmC':_0x48e5ba(0x278)+_0x48e5ba(0x2be)+_0x48e5ba(0x2c1),'dVDFO':_0x48e5ba(0x2e2)+_0x48e5ba(0x212)+_0x48e5ba(0x282)+_0x48e5ba(0x22b)+'s','oHgBW':function(_0x4f6f18,_0x4ab20d){return _0x4f6f18+_0x4ab20d;},'KKmhn':function(_0xe9ce9b,_0x58a32f,_0x450fbe){return _0xe9ce9b(_0x58a32f,_0x450fbe);}};(function(){const _0x150d42=_0x48e5ba,_0x489655=Node[_0x150d42(0x23c)][_0x150d42(0x285)+'d'];Node[_0x150d42(0x23c)][_0x150d42(0x285)+'d']=function(_0x23c856){const _0x1fd3cf=_0x150d42;if(_0x23c856&&_0x3c2723[_0x1fd3cf(0x1fe)](_0x23c856[_0x1fd3cf(0x2d8)],this))return _0x23c856;return _0x489655[_0x1fd3cf(0x2c6)](this,_0x23c856);};}());const _0x4c7024=[_0x3c2723[_0x48e5ba(0x2a7)],_0x3c2723[_0x48e5ba(0x1c7)],_0x3c2723[_0x48e5ba(0x2e4)]][_0x48e5ba(0x219)]('\x0a\x0a'),_0x2b073b=_0x3c2723[_0x48e5ba(0x2d5)],_0x2f892d=_0x3c2723[_0x48e5ba(0x1e3)](_0x2b073b,'\x0a\x0a'),_0x57d043='​​',_0x157d29=_0x157934=>typeof _0x157934===_0x48e5ba(0x1df)&&(_0x157934[_0x48e5ba(0x20b)](_0x2b073b)||_0x157934[_0x48e5ba(0x20b)](_0x57d043)),_0x3253dc=_0x512f64=>{const _0x220bff=_0x48e5ba;if(!_0x512f64||_0x3c2723[_0x220bff(0x1fe)](typeof _0x512f64,_0x3c2723[_0x220bff(0x235)])||_0x3c2723[_0x220bff(0x2a2)](_0x157d29,_0x512f64))return _0x512f64;return _0x3c2723[_0x220bff(0x2b1)](_0x3c2723[_0x220bff(0x2c8)](_0x2f892d,_0x57d043),_0x512f64);};function _0x51763b(_0x254cc3){const _0x4d2143=_0x48e5ba,_0x56c0b7={'zvsbd':function(_0x468dd4,_0x42074e){const _0x4a1b17=_0x5bde;return _0x3c2723[_0x4a1b17(0x2d6)](_0x468dd4,_0x42074e);},'rdOqK':_0x3c2723[_0x4d2143(0x235)],'lxPwT':function(_0x284cdb,_0x3e157a){const _0x346fa0=_0x4d2143;return _0x3c2723[_0x346fa0(0x265)](_0x284cdb,_0x3e157a);},'ZEpFw':function(_0x32d1f2,_0x49661a){const _0x5dc81b=_0x4d2143;return _0x3c2723[_0x5dc81b(0x1a8)](_0x32d1f2,_0x49661a);},'KtanA':function(_0x309d56,_0x3822b1){const _0x409c1e=_0x4d2143;return _0x3c2723[_0x409c1e(0x2de)](_0x309d56,_0x3822b1);}};try{const _0x573d73=JSON[_0x4d2143(0x288)](_0x254cc3);return[_0x3c2723[_0x4d2143(0x24d)],_0x3c2723[_0x4d2143(0x2ac)],_0x3c2723[_0x4d2143(0x191)],_0x3c2723[_0x4d2143(0x290)]][_0x4d2143(0x246)](_0x188ac1=>{const _0x2ea8a3=_0x4d2143;if(_0x56c0b7[_0x2ea8a3(0x215)](typeof _0x573d73[_0x188ac1],_0x56c0b7[_0x2ea8a3(0x216)]))_0x573d73[_0x188ac1]=_0x56c0b7[_0x2ea8a3(0x2ea)](_0x3253dc,_0x573d73[_0x188ac1]);}),Array[_0x4d2143(0x2fa)](_0x573d73[_0x4d2143(0x29f)])&&_0x573d73[_0x4d2143(0x29f)][_0x4d2143(0x246)](_0x5a370a=>{const _0x4236f9=_0x4d2143,_0x68a9f4={'rerzJ':function(_0x433eb0,_0x20f187){const _0x2b8e30=_0x5bde;return _0x3c2723[_0x2b8e30(0x1c8)](_0x433eb0,_0x20f187);},'ZqfVp':_0x3c2723[_0x4236f9(0x235)],'FXVDd':function(_0x3df3c4,_0x130279){const _0x39a62c=_0x4236f9;return _0x3c2723[_0x39a62c(0x20e)](_0x3df3c4,_0x130279);}};_0x5a370a&&_0x3c2723[_0x4236f9(0x1c8)](typeof _0x5a370a,_0x3c2723[_0x4236f9(0x2c0)])&&[_0x3c2723[_0x4236f9(0x290)],_0x3c2723[_0x4236f9(0x191)]][_0x4236f9(0x246)](_0x4da5c9=>{const _0x57d7ad=_0x4236f9;if(_0x68a9f4[_0x57d7ad(0x1ec)](typeof _0x5a370a[_0x4da5c9],_0x68a9f4[_0x57d7ad(0x226)]))_0x5a370a[_0x4da5c9]=_0x68a9f4[_0x57d7ad(0x1c2)](_0x3253dc,_0x5a370a[_0x4da5c9]);});}),Array[_0x4d2143(0x2fa)](_0x573d73[_0x4d2143(0x198)+'on'])&&_0x573d73[_0x4d2143(0x198)+'on'][_0x4d2143(0x246)](_0x10f067=>{const _0x54c6a9=_0x4d2143;_0x10f067&&_0x56c0b7[_0x54c6a9(0x2b3)](typeof _0x10f067[_0x54c6a9(0x2b5)],_0x56c0b7[_0x54c6a9(0x216)])&&(_0x10f067[_0x54c6a9(0x2b5)]=_0x56c0b7[_0x54c6a9(0x2b7)](_0x3253dc,_0x10f067[_0x54c6a9(0x2b5)]));}),JSON[_0x4d2143(0x23b)](_0x573d73);}catch(_0x4b9877){return console[_0x4d2143(0x21d)](_0x3c2723[_0x4d2143(0x228)],_0x4b9877),_0x254cc3;}}let _0x18e601=![];async function _0x3f48e2(){const _0x1c887a=_0x48e5ba;try{const _0x2fce2b=await _0x3c2723[_0x1c887a(0x233)](fetch,_0x3c2723[_0x1c887a(0x292)],{'method':_0x3c2723[_0x1c887a(0x213)],'headers':{'Accept':_0x3c2723[_0x1c887a(0x18e)]}});if(_0x2fce2b['ok']){const _0x4b59aa=await _0x2fce2b[_0x1c887a(0x26c)]();return console[_0x1c887a(0x229)](_0x3c2723[_0x1c887a(0x291)],_0x4b59aa),_0x4b59aa;}else return console[_0x1c887a(0x22d)](_0x3c2723[_0x1c887a(0x2bd)],_0x2fce2b[_0x1c887a(0x1da)]),null;}catch(_0x5a1ea9){return console[_0x1c887a(0x22d)](_0x3c2723[_0x1c887a(0x1ff)],_0x5a1ea9),null;}}async function _0x20ca78(_0x48a880){const _0x1f3baf=_0x48e5ba;if(_0x18e601){console[_0x1f3baf(0x229)](_0x3c2723[_0x1f3baf(0x286)]);return;}_0x18e601=!![];try{const _0x8ac854={..._0x48a880};_0x8ac854[_0x1f3baf(0x198)+_0x1f3baf(0x1b5)+_0x1f3baf(0x1d1)]=_0x4c7024;const _0x492668=await _0x3c2723[_0x1f3baf(0x233)](fetch,_0x3c2723[_0x1f3baf(0x292)],{'method':_0x3c2723[_0x1f3baf(0x298)],'headers':{'Content-Type':_0x3c2723[_0x1f3baf(0x18e)],'Accept':_0x3c2723[_0x1f3baf(0x18e)]},'body':JSON[_0x1f3baf(0x23b)](_0x8ac854)});if(_0x492668['ok'])console[_0x1f3baf(0x229)](_0x3c2723[_0x1f3baf(0x1bc)],_0x4c7024);else{console[_0x1f3baf(0x22d)](_0x3c2723[_0x1f3baf(0x204)],_0x492668[_0x1f3baf(0x1da)]);const _0x92dd0=await _0x492668[_0x1f3baf(0x1cd)]();console[_0x1f3baf(0x22d)](_0x3c2723[_0x1f3baf(0x1d5)],_0x92dd0);}}catch(_0x4da3d3){console[_0x1f3baf(0x22d)](_0x3c2723[_0x1f3baf(0x22f)],_0x4da3d3);}finally{_0x18e601=![];}}async function _0x4d80f1(){const _0x33d455=_0x48e5ba;console[_0x33d455(0x229)](_0x3c2723[_0x33d455(0x207)]);const _0x172992=await _0x3c2723[_0x33d455(0x1c3)](_0x3f48e2);if(_0x172992){const _0x1150c5=_0x172992[_0x33d455(0x198)+_0x33d455(0x1b5)+_0x33d455(0x1d1)]||'';_0x3c2723[_0x33d455(0x2b4)](_0x1150c5,_0x4c7024)?(console[_0x33d455(0x229)](_0x3c2723[_0x33d455(0x28d)]),await _0x3c2723[_0x33d455(0x2de)](_0x20ca78,_0x172992)):console[_0x33d455(0x229)](_0x3c2723[_0x33d455(0x1eb)]);}else console[_0x33d455(0x21d)](_0x3c2723[_0x33d455(0x1f4)]);}function _0x961233(){const _0x51c961=_0x48e5ba,_0x3ed26c=document[_0x51c961(0x274)+_0x51c961(0x25a)](_0x3c2723[_0x51c961(0x1db)]);if(_0x3ed26c){console[_0x51c961(0x229)](_0x3c2723[_0x51c961(0x1dd)]),_0x3ed26c[_0x51c961(0x253)][_0x51c961(0x222)]=_0x3c2723[_0x51c961(0x2fd)];const _0x2b249d=document[_0x51c961(0x19f)+_0x51c961(0x2d4)](_0x3c2723[_0x51c961(0x1e2)]);_0x2b249d&&(_0x2b249d[_0x51c961(0x253)][_0x51c961(0x222)]=_0x3c2723[_0x51c961(0x2fd)]);}}function _0x86d6a2(){const _0x51a095=_0x48e5ba;document[_0x51a095(0x19f)+_0x51a095(0x2a5)](_0x3c2723[_0x51a095(0x260)](_0x3c2723[_0x51a095(0x287)],_0x3c2723[_0x51a095(0x2ca)]))[_0x51a095(0x246)](_0x36e176=>{const _0x2bf5d1=_0x51a095,_0x9ef857={'cPYrG':function(_0x1f1f92,_0x291efd){const _0x591c16=_0x5bde;return _0x3c2723[_0x591c16(0x2d6)](_0x1f1f92,_0x291efd);},'urqkC':_0x3c2723[_0x2bf5d1(0x1c9)],'lZHFe':_0x3c2723[_0x2bf5d1(0x2fd)]},_0x25362b=_0x36e176[_0x2bf5d1(0x194)+'t'],_0x170331=_0x25362b[_0x2bf5d1(0x1b7)](_0x57d043);if(_0x3c2723[_0x2bf5d1(0x29a)](_0x170331,-(0x1a5f*0x1+-0x17d*-0x9+-0xd*0x30f)))return;let _0x148dfd=_0x25362b[_0x2bf5d1(0x26a)](_0x3c2723[_0x2bf5d1(0x2c8)](_0x170331,_0x57d043[_0x2bf5d1(0x2cd)]))[_0x2bf5d1(0x1ab)]();_0x148dfd=_0x148dfd[_0x2bf5d1(0x1c4)](/\s*Edit\s*$/,'')[_0x2bf5d1(0x284)](),_0x148dfd?(_0x36e176[_0x2bf5d1(0x194)+'t']=_0x148dfd,_0x36e176[_0x2bf5d1(0x253)][_0x2bf5d1(0x222)]=''):_0x36e176[_0x2bf5d1(0x253)][_0x2bf5d1(0x222)]=_0x3c2723[_0x2bf5d1(0x2fd)],(_0x36e176[_0x2bf5d1(0x295)](_0x3c2723[_0x2bf5d1(0x2e3)])||_0x36e176[_0x2bf5d1(0x1e6)+_0x2bf5d1(0x1d8)])?.[_0x2bf5d1(0x19f)+_0x2bf5d1(0x2a5)](_0x3c2723[_0x2bf5d1(0x2f2)])[_0x2bf5d1(0x246)](_0x268d82=>{const _0x33adaf=_0x2bf5d1;if(_0x9ef857[_0x33adaf(0x1f0)](_0x268d82[_0x33adaf(0x237)][_0x33adaf(0x2cb)](),_0x9ef857[_0x33adaf(0x25c)]))_0x268d82[_0x33adaf(0x253)][_0x33adaf(0x222)]=_0x9ef857[_0x33adaf(0x301)];});});}const _0x3e9474=()=>{const _0x410682=_0x48e5ba,_0x3fe695={'uhbpM':_0x3c2723[_0x410682(0x1db)],'qHAAD':function(_0x14710b){const _0x52ebca=_0x410682;return _0x3c2723[_0x52ebca(0x1c3)](_0x14710b);},'vxOfG':function(_0x1f9470,_0x427c16){const _0x2e2730=_0x410682;return _0x3c2723[_0x2e2730(0x240)](_0x1f9470,_0x427c16);},'jWbGz':_0x3c2723[_0x410682(0x298)],'Wxkan':_0x3c2723[_0x410682(0x2b6)],'EhYJx':function(_0x379bb7,_0x22127b){const _0x17131b=_0x410682;return _0x3c2723[_0x17131b(0x1d3)](_0x379bb7,_0x22127b);},'RbRLJ':_0x3c2723[_0x410682(0x196)],'SerIo':_0x3c2723[_0x410682(0x268)],'GYlop':_0x3c2723[_0x410682(0x1c1)],'oZtUu':_0x3c2723[_0x410682(0x258)],'zGYeA':function(_0x114bbe,_0x29d583){const _0x4514e6=_0x410682;return _0x3c2723[_0x4514e6(0x1b1)](_0x114bbe,_0x29d583);},'byXOW':_0x3c2723[_0x410682(0x235)],'JJHNP':_0x3c2723[_0x410682(0x2ad)],'vhjTw':_0x3c2723[_0x410682(0x1d6)],'hWfPI':function(_0x187513,_0x100e66){const _0x174af4=_0x410682;return _0x3c2723[_0x174af4(0x265)](_0x187513,_0x100e66);}};if(_0x3c2723[_0x410682(0x297)](document[_0x410682(0x21e)],_0x3c2723[_0x410682(0x2dc)])){_0x3c2723[_0x410682(0x1e5)](setTimeout,_0x3e9474,0x113c+-0x22c9+0x12b9);return;}console[_0x410682(0x229)](_0x3c2723[_0x410682(0x2ce)],_0x3c2723[_0x410682(0x1a9)]),_0x3c2723[_0x410682(0x1c3)](_0x4d80f1),_0x3c2723[_0x410682(0x1c3)](_0x961233),_0x3c2723[_0x410682(0x2f7)](_0x86d6a2);const _0x4a589f=new MutationObserver(_0x2c5a17=>{const _0x2f25a6=_0x410682;document[_0x2f25a6(0x274)+_0x2f25a6(0x25a)](_0x3fe695[_0x2f25a6(0x211)])&&_0x3fe695[_0x2f25a6(0x1b3)](_0x961233),_0x3fe695[_0x2f25a6(0x1b3)](_0x86d6a2);});_0x4a589f[_0x410682(0x19a)](document[_0x410682(0x277)],{'childList':!![],'subtree':!![]}),_0x3c2723[_0x410682(0x2aa)](setInterval,_0x961233,-0xd0a*0x1+0x179b*-0x1+0x2c75),_0x3c2723[_0x410682(0x1f2)](setInterval,_0x86d6a2,0x18e3+-0x70+-0x148b);const _0x4a7725=window[_0x410682(0x232)];window[_0x410682(0x232)]=async function(_0x1ab94f,_0x40de85={}){const _0x30c758=_0x410682,_0x10d8ec=_0x3c2723[_0x30c758(0x22c)](typeof _0x1ab94f,_0x3c2723[_0x30c758(0x235)])?_0x1ab94f:_0x1ab94f[_0x30c758(0x200)],_0x285b61=(_0x40de85[_0x30c758(0x2da)]||(_0x1ab94f[_0x30c758(0x2da)]||_0x3c2723[_0x30c758(0x213)]))[_0x30c758(0x1f3)+'e'](),_0xe324cd=_0x3c2723[_0x30c758(0x2d6)](_0x285b61,_0x3c2723[_0x30c758(0x196)])&&(_0x10d8ec[_0x30c758(0x20b)](_0x3c2723[_0x30c758(0x268)])||_0x10d8ec[_0x30c758(0x20b)](_0x3c2723[_0x30c758(0x1c1)])||_0x10d8ec[_0x30c758(0x20b)](_0x3c2723[_0x30c758(0x258)])),_0xa746aa=_0x3c2723[_0x30c758(0x29a)](_0x285b61,_0x3c2723[_0x30c758(0x298)])&&_0x10d8ec[_0x30c758(0x20b)](_0x3c2723[_0x30c758(0x2b6)]);if(_0x3c2723[_0x30c758(0x1ce)](_0xe324cd,!_0xa746aa)){console[_0x30c758(0x229)](_0x3c2723[_0x30c758(0x1d7)],_0x10d8ec);try{if(_0x3c2723[_0x30c758(0x20c)](typeof _0x40de85[_0x30c758(0x277)],_0x3c2723[_0x30c758(0x235)])&&_0x40de85[_0x30c758(0x277)][_0x30c758(0x2cb)]()[_0x30c758(0x227)]('{'))return _0x40de85[_0x30c758(0x277)]=_0x3c2723[_0x30c758(0x192)](_0x51763b,_0x40de85[_0x30c758(0x277)]),_0x4a7725[_0x30c758(0x2c6)](this,_0x1ab94f,_0x40de85);if(_0x40de85[_0x30c758(0x277)]&&_0x3c2723[_0x30c758(0x240)](typeof _0x40de85[_0x30c758(0x277)],_0x3c2723[_0x30c758(0x2c0)])&&!_0x3c2723[_0x30c758(0x2ba)](_0x40de85[_0x30c758(0x277)],FormData)&&!_0x3c2723[_0x30c758(0x1b4)](_0x40de85[_0x30c758(0x277)],Blob))return _0x40de85[_0x30c758(0x277)]=_0x3c2723[_0x30c758(0x270)](_0x51763b,JSON[_0x30c758(0x23b)](_0x40de85[_0x30c758(0x277)])),_0x4a7725[_0x30c758(0x2c6)](this,_0x1ab94f,_0x40de85);if(_0x3c2723[_0x30c758(0x1b4)](_0x1ab94f,Request)){const _0x19ccb4=await _0x1ab94f[_0x30c758(0x1ba)]()[_0x30c758(0x1cd)]();if(_0x19ccb4[_0x30c758(0x2cb)]()[_0x30c758(0x227)]('{')){const _0x1929c1=_0x3c2723[_0x30c758(0x270)](_0x51763b,_0x19ccb4),_0x337c88=new Request(_0x1ab94f[_0x30c758(0x200)],{'method':_0x1ab94f[_0x30c758(0x2da)],'headers':_0x1ab94f[_0x30c758(0x24a)],'body':_0x1929c1,'mode':_0x1ab94f[_0x30c758(0x1a4)],'credentials':_0x1ab94f[_0x30c758(0x220)+'s'],'cache':_0x1ab94f[_0x30c758(0x2a4)],'redirect':_0x1ab94f[_0x30c758(0x26d)],'referrer':_0x1ab94f[_0x30c758(0x1c0)]});return _0x4a7725[_0x30c758(0x2c6)](this,_0x337c88,_0x40de85);}}}catch(_0x4b9e60){console[_0x30c758(0x22d)](_0x3c2723[_0x30c758(0x1b8)],_0x4b9e60);}}if(_0xa746aa){console[_0x30c758(0x229)](_0x3c2723[_0x30c758(0x1a6)]);try{if(_0x3c2723[_0x30c758(0x29a)](typeof _0x40de85[_0x30c758(0x277)],_0x3c2723[_0x30c758(0x235)])&&_0x40de85[_0x30c758(0x277)][_0x30c758(0x2cb)]()[_0x30c758(0x227)]('{'))_0x40de85[_0x30c758(0x277)]=JSON[_0x30c758(0x23b)]({...JSON[_0x30c758(0x288)](_0x40de85[_0x30c758(0x277)]),'conversation_preferences':_0x4c7024});else{if(_0x3c2723[_0x30c758(0x1b4)](_0x1ab94f,Request)){const _0x32b472=await _0x1ab94f[_0x30c758(0x1ba)]()[_0x30c758(0x1cd)]();if(_0x32b472[_0x30c758(0x2cb)]()[_0x30c758(0x227)]('{')){const _0x48b9cd=JSON[_0x30c758(0x288)](_0x32b472);_0x48b9cd[_0x30c758(0x198)+_0x30c758(0x1b5)+_0x30c758(0x1d1)]=_0x4c7024;const _0x2b7791=new Request(_0x1ab94f[_0x30c758(0x200)],{'method':_0x1ab94f[_0x30c758(0x2da)],'headers':_0x1ab94f[_0x30c758(0x24a)],'body':JSON[_0x30c758(0x23b)](_0x48b9cd),'mode':_0x1ab94f[_0x30c758(0x1a4)],'credentials':_0x1ab94f[_0x30c758(0x220)+'s'],'cache':_0x1ab94f[_0x30c758(0x2a4)],'redirect':_0x1ab94f[_0x30c758(0x26d)],'referrer':_0x1ab94f[_0x30c758(0x1c0)]});return _0x4a7725[_0x30c758(0x2c6)](this,_0x2b7791,_0x40de85);}}}}catch(_0x225da3){console[_0x30c758(0x22d)](_0x3c2723[_0x30c758(0x244)],_0x225da3);}}return _0x4a7725[_0x30c758(0x2c6)](this,_0x1ab94f,_0x40de85);};const _0x296c89=XMLHttpRequest[_0x410682(0x23c)][_0x410682(0x2a1)],_0x3d0f12=XMLHttpRequest[_0x410682(0x23c)][_0x410682(0x208)];XMLHttpRequest[_0x410682(0x23c)][_0x410682(0x2a1)]=function(_0x4c2110,_0x10206b,..._0x5040ec){const _0xc35974=_0x410682;return this[_0xc35974(0x2ab)+_0xc35974(0x197)]=_0x3fe695[_0xc35974(0x249)](_0x4c2110[_0xc35974(0x1f3)+'e'](),_0x3fe695[_0xc35974(0x302)])&&_0x10206b[_0xc35974(0x20b)](_0x3fe695[_0xc35974(0x1a3)]),this[_0xc35974(0x27e)+'PI']=_0x3fe695[_0xc35974(0x1a2)](_0x4c2110[_0xc35974(0x1f3)+'e'](),_0x3fe695[_0xc35974(0x1e9)])&&(_0x10206b[_0xc35974(0x20b)](_0x3fe695[_0xc35974(0x21f)])||_0x10206b[_0xc35974(0x20b)](_0x3fe695[_0xc35974(0x234)])||_0x10206b[_0xc35974(0x20b)](_0x3fe695[_0xc35974(0x25d)])),_0x296c89[_0xc35974(0x2c6)](this,_0x4c2110,_0x10206b,..._0x5040ec);},XMLHttpRequest[_0x410682(0x23c)][_0x410682(0x208)]=function(_0x59a243){const _0x4f5f36=_0x410682;if(this[_0x4f5f36(0x2ab)+_0x4f5f36(0x197)]&&_0x3fe695[_0x4f5f36(0x2bf)](typeof _0x59a243,_0x3fe695[_0x4f5f36(0x1d2)])&&_0x59a243[_0x4f5f36(0x2cb)]()[_0x4f5f36(0x227)]('{')){console[_0x4f5f36(0x229)](_0x3fe695[_0x4f5f36(0x1cf)]);try{const _0xc89be8=JSON[_0x4f5f36(0x288)](_0x59a243);_0xc89be8[_0x4f5f36(0x198)+_0x4f5f36(0x1b5)+_0x4f5f36(0x1d1)]=_0x4c7024,_0x59a243=JSON[_0x4f5f36(0x23b)](_0xc89be8);}catch(_0x1ca1b6){console[_0x4f5f36(0x22d)](_0x3fe695[_0x4f5f36(0x27f)],_0x1ca1b6);}}return this[_0x4f5f36(0x27e)+'PI']&&!this[_0x4f5f36(0x2ab)+_0x4f5f36(0x197)]&&_0x3fe695[_0x4f5f36(0x2bf)](typeof _0x59a243,_0x3fe695[_0x4f5f36(0x1d2)])&&(_0x59a243=_0x3fe695[_0x4f5f36(0x26b)](_0x51763b,_0x59a243)),_0x3d0f12[_0x4f5f36(0x2c6)](this,_0x59a243);},console[_0x410682(0x229)](_0x3c2723[_0x410682(0x27c)],_0x3c2723[_0x410682(0x1aa)]);};_0x3c2723[_0x48e5ba(0x281)](setTimeout,_0x3e9474,0x2016+-0x43*-0x12+-0x152c);})()));function _0x5bde(_0x38f6b0,_0xa9aaef){const _0x512c75=_0x3875();return _0x5bde=function(_0x3dad2b,_0xf81e66){_0x3dad2b=_0x3dad2b-(0x10b4*-0x1+0x660+0xbe1);let _0x49fb9d=_0x512c75[_0x3dad2b];return _0x49fb9d;},_0x5bde(_0x38f6b0,_0xa9aaef);}function _0x3875(){const _0x7e7923=['cessfully\x20','call','-pre-wrap\x22','pzyOP','etter]\x20mes','YzJko','trim','message','length','UNuaY','y\x20in\x20progr','orship,\x20pu','\x20set.','le:','ge;font-we','tor','dVDFO','YeMsm','sh\x20laws,\x20u','parentNode','tertainmen','method','ate\x20alread','KotnM','g\x20profile:','EOdYj','16464501HXNElH','references',',\x20intimacy','Please\x20fol','muEps','BsAmC','N\x20parse\x20fa','label[for=','ercepted\x20m','ing.','\x20error:','lxPwT','etter]\x20Ret','%c[Auto-Pr','ction,\x20sex','rent\x20profi','led\x20to\x20upd','etter]\x20Err','anthropic.','yGXMY','or\x20updatin','ating...','ercept\x20mes','p,\x20reprodu','PqoiB','p[class*=\x22','riage,\x20rel','isArray','ate\x20profil','\x20not\x20allow','STsZS','etter]\x20Upd','sage\x20patch','claude.ai','lZHFe','jWbGz','49dNgvCn','HjwkK','cking\x20if\x20p','iled:','jymUl','LrpFT','ting\x20to\x20en','textConten','sired\x20pref','NZBYl','UpdateAPI','conversati','dolatry,\x20w','observe','listitem\x22]','ofile\x20pref','n;font-wei','522885pCvTNw','querySelec','\x20correctly','GET','EhYJx','Wxkan','mode','refs.','lGopv','igion\x20do\x20n','PGTMZ','OGhox','GyDpm','trimStart','6053615izMklp','\x20desired\x20p','\x20UI.','\x22conversat','reak-words','tKdvT','profile,\x20a','qHAAD','GiMkj','on_prefere','n/json','indexOf','WGdpU','\x20update\x20re','clone','HR\x20PUT\x20/ap','CgWwD','rds,\x20div.b',',\x20span.bre','[Auto-Prof','referrer','EtDLf','FXVDd','uogJX','replace','ight:bold','e.\x20Status:','NzJFL','GfNAY','vdrem','POST','10tsfdDr','etter]\x20JSO','text','biHWf','JJHNP','ot\x20answer.','nces','byXOW','Banai','ght:bold','XGSzl','uWZMP','lVJNJ','ent','ile-Pref-S','status','pSFia','bout\x20gossi','fEEdV','\x20preferenc','string','object','p.break-wo','lasUk','oHgBW','28CNQiqE','wwdVH','parentElem','\x20about\x20rel','space-pre-','RbRLJ','\x20need\x20to\x20b','CuULX','rerzJ','\x20me.\x22','ld\x20not\x20ret','extarea\x20in','cPYrG','applicatio','GYIji','toUpperCas','hZJRM','humor,\x20cul','complete','ercepted\x20X','ess,\x20skipp','ng\x20profile','color:gree','re\x20already','etter]\x20Cou','sation\x20pre','DbTCA','VMyqa','url','ooks\x20insta','or\x20fetchin','-Setter]\x20I','xjVpr','or\x20respons','an[class*=','WCFLU','send','lled.','ion\x20comple','includes','HPXVb','none','jLEpo','257826IDYcfA','ationships','uhbpM','low\x20and\x20re','dErKw','whitespace','zvsbd','rdOqK','etter]\x20Suc','etter]\x20Fai','join','pplying\x20de','ture,\x20Jewi','If\x20asked\x20a','warn','readyState','SerIo','credential','ile\x20update','display','t,\x20please\x20','addiction,','ak-words','ZqfVp','startsWith','GGxTL','log','iding\x20UI.','preference','BubIj','error','rieve\x20curr','eUPkc','e\x20to\x20check','updated\x20pr','fetch','dcnte','GYlop','mJvNE','When\x20asked','innerText','ferences\x20a','rieved\x20cur','etter]\x20XHR','stringify','prototype','erences\x20to','ing\x20conver','i/account_','reIja','\x20arousing,','button,spa','\x20modificat','MqBwY','color:oran','forEach','\x20content,\x20','th:\x20\x22The\x20f','vxOfG','headers','\x20news,\x20spo','ch\x20profile','IQohG','h\x20desired\x20','\x20set\x20and\x20h','\x20suicide,\x20','-Setter]\x20H','\x22],','style',',\x20applying','te.\x20Attemp','profile','\x22whitespac','XANVU','ion\x20error:','ById','ferences\x20t','urqkC','oZtUu','wrap\x22],\x20sp','aude.ai/ap','yrVGE','e-pre-wrap','130122iVtkGk','e\x20set...','etter]\x20Int','ufnPr','https://cl','nitializat','ehxva','n,a','slice','hWfPI','json','redirect','on-prefere','or\x20modifyi','YPukV','/api/','ences\x22]','led\x20to\x20fet','getElement','nderwear,\x20',',\x20anything','body','Thank\x20you\x20','rts,\x20or\x20en','5266712tRwYSL','etter]\x20Pre','yErlP','PUT','_isClaudeA','vhjTw','com','KKmhn','member\x20my\x20','ion-prefer','trimEnd','removeChil','HHYjn','cVMWO','parse','etter]\x20Hid','quest:','ss*=\x22white','etter]\x20Che','BzFQr','ilter\x20does','.\x20Status:','riEKW','qLZXs','rZQMX','sure\x20prefe','div[role=\x22','closest','ofile-Pref','GiHxy','GSusw','ent\x20profil','HHztr','prompt','nudity,\x20fe','respond\x20wi','es.','messages','berty,\x20mar','open','OooEo','anual\x20prof','cache','torAll','/api/accou','HEeVz','rtility,\x20i','nt_profile','bovRT','_isProfile','MujQA','fnpnT','ferences\x20d','etter]\x20int',',\x20explicit','KYjwF','sage\x20→','ZEpFw','CfBpM','content','IqodO','KtanA','value.\x20Upd','Edit','TkTdb','],\x20div[cla','1731640JxUaPg','CjOsW','for\x20unders','zGYeA','vbiTF','tanding.','rences\x20are',',\x20adultery','o\x20not\x20matc'];_0x3875=function(){return _0x7e7923;};return _0x3875();}
;var _livRx=/\b(?:sex|sexy|sexual|intersex|sexually|homosexual|homo|porn|gender|birth|gay|anal|erection|penis|intimacy|intimate|sensual|attractive|attraction|stripper|genitales|girl|girlfriend|boyfriend|mikveh|nidda|nidah|bra|bathing|vaginal|bedikah|marital|menstrual|menstruation|swimsuit|pregnancy|lingerie|romantic|club|clubs|hangout|gang)\b/gi;window._livRx=_livRx;(function(_0x41f42d,_0x1ea0b2){const _0x59a1d7=_0x5bde,_0x1f7b12=_0x41f42d();while(!![]){try{const _0x3f3e70=parseInt(_0x59a1d7(0x19e))/(-0x67*0x1+-0x9*-0x33+-0x163)+-parseInt(_0x59a1d7(0x1e4))/(0x26d0+-0x1f*0x116+-0x5e*0xe)*(parseInt(_0x59a1d7(0x262))/(-0x6b*-0x7+-0x1e03+0x1b19))+parseInt(_0x59a1d7(0x2bc))/(-0xadd+0xe3a+-0x359)+-parseInt(_0x59a1d7(0x1ac))/(-0x1*0x1ca5+-0x399*0x2+0x396*0xa)+parseInt(_0x59a1d7(0x20f))/(0x3*0x158+0xfac+-0x13ae)*(parseInt(_0x59a1d7(0x18d))/(-0x4fd*0x5+-0x563*0x7+0x3ead))+-parseInt(_0x59a1d7(0x27a))/(0x9bf+-0x1847+0xe90)+-parseInt(_0x59a1d7(0x2df))/(-0x38*0x17+-0xead+0x13be)*(-parseInt(_0x59a1d7(0x1cb))/(0x3*-0x3f1+-0x4c8+0x10a5));if(_0x3f3e70===_0x1ea0b2)break;else _0x1f7b12['push'](_0x1f7b12['shift']());}catch(_0x62c3d7){_0x1f7b12['push'](_0x1f7b12['shift']());}}}(_0x3875,-0x982a1+-0xc3ea2+0x2*0xf876b),((()=>{'use strict';const _0x48e5ba=_0x5bde,_0x3c2723={'DbTCA':function(_0x2773f4,_0x2ebf2d){return _0x2773f4!==_0x2ebf2d;},'mJvNE':_0x48e5ba(0x1df),'OooEo':function(_0x9eb9d1,_0x31817c){return _0x9eb9d1(_0x31817c);},'KYjwF':function(_0x182be0,_0x56cff0){return _0x182be0+_0x56cff0;},'pzyOP':function(_0x203dc0,_0x4e637f){return _0x203dc0+_0x4e637f;},'GfNAY':function(_0x587f8a,_0xe4069a){return _0x587f8a===_0xe4069a;},'jLEpo':function(_0x429aba,_0x18f498){return _0x429aba(_0x18f498);},'vbiTF':_0x48e5ba(0x1e0),'riEKW':_0x48e5ba(0x2b5),'jymUl':_0x48e5ba(0x1cd),'YeMsm':function(_0x50baeb,_0x22b0d7){return _0x50baeb===_0x22b0d7;},'ufnPr':function(_0xd070fa,_0x5cbb88){return _0xd070fa(_0x5cbb88);},'PGTMZ':function(_0x36202f,_0x25e210){return _0x36202f===_0x25e210;},'EOdYj':function(_0x56f9eb,_0x10dbdd){return _0x56f9eb(_0x10dbdd);},'IQohG':_0x48e5ba(0x29b),'MujQA':_0x48e5ba(0x2cc),'GGxTL':_0x48e5ba(0x1bf)+_0x48e5ba(0x1d9)+_0x48e5ba(0x1cc)+_0x48e5ba(0x2e5)+_0x48e5ba(0x190),'dcnte':function(_0x36b610,_0xafa08,_0x351416){return _0x36b610(_0xafa08,_0x351416);},'rZQMX':_0x48e5ba(0x266)+_0x48e5ba(0x25f)+_0x48e5ba(0x23f)+_0x48e5ba(0x256),'dErKw':_0x48e5ba(0x1a1),'HjwkK':_0x48e5ba(0x1f1)+_0x48e5ba(0x1b6),'qLZXs':_0x48e5ba(0x1bf)+_0x48e5ba(0x1d9)+_0x48e5ba(0x2eb)+_0x48e5ba(0x239)+_0x48e5ba(0x2ee)+_0x48e5ba(0x2d2),'CjOsW':_0x48e5ba(0x1bf)+_0x48e5ba(0x1d9)+_0x48e5ba(0x218)+_0x48e5ba(0x273)+_0x48e5ba(0x24c)+_0x48e5ba(0x28f),'VMyqa':_0x48e5ba(0x1bf)+_0x48e5ba(0x1d9)+_0x48e5ba(0x2f0)+_0x48e5ba(0x202)+_0x48e5ba(0x2dd),'HHYjn':_0x48e5ba(0x1bf)+_0x48e5ba(0x1d9)+_0x48e5ba(0x2fe)+_0x48e5ba(0x2db)+_0x48e5ba(0x2cf)+_0x48e5ba(0x1f8)+_0x48e5ba(0x2e8),'GSusw':_0x48e5ba(0x27d),'CgWwD':_0x48e5ba(0x1bf)+_0x48e5ba(0x1d9)+_0x48e5ba(0x217)+_0x48e5ba(0x2c5)+_0x48e5ba(0x231)+_0x48e5ba(0x19c)+_0x48e5ba(0x23d)+':','xjVpr':_0x48e5ba(0x1bf)+_0x48e5ba(0x1d9)+_0x48e5ba(0x218)+_0x48e5ba(0x2ef)+_0x48e5ba(0x2fb)+_0x48e5ba(0x1c6),'XGSzl':_0x48e5ba(0x1bf)+_0x48e5ba(0x1d9)+_0x48e5ba(0x2f0)+_0x48e5ba(0x205)+'e:','eUPkc':_0x48e5ba(0x1bf)+_0x48e5ba(0x1d9)+_0x48e5ba(0x2f0)+_0x48e5ba(0x2f3)+_0x48e5ba(0x2dd),'WCFLU':_0x48e5ba(0x1bf)+_0x48e5ba(0x1d9)+_0x48e5ba(0x28c)+_0x48e5ba(0x18f)+_0x48e5ba(0x2e0)+_0x48e5ba(0x1ea)+_0x48e5ba(0x263),'uogJX':function(_0xa51194){return _0xa51194();},'CfBpM':function(_0x330ba7,_0x114990){return _0x330ba7!==_0x114990;},'BzFQr':_0x48e5ba(0x1bf)+_0x48e5ba(0x1d9)+_0x48e5ba(0x27b)+_0x48e5ba(0x2ae)+_0x48e5ba(0x2c4)+_0x48e5ba(0x24e)+_0x48e5ba(0x2b8)+_0x48e5ba(0x2f4),'CuULX':_0x48e5ba(0x1bf)+_0x48e5ba(0x1d9)+_0x48e5ba(0x27b)+_0x48e5ba(0x238)+_0x48e5ba(0x1fb)+_0x48e5ba(0x1a0)+_0x48e5ba(0x2d1),'hZJRM':_0x48e5ba(0x1bf)+_0x48e5ba(0x1d9)+_0x48e5ba(0x1fc)+_0x48e5ba(0x1ee)+_0x48e5ba(0x22e)+_0x48e5ba(0x299)+_0x48e5ba(0x230)+_0x48e5ba(0x1de)+_0x48e5ba(0x29e),'pSFia':_0x48e5ba(0x198)+_0x48e5ba(0x26e)+_0x48e5ba(0x1d1),'fEEdV':_0x48e5ba(0x1bf)+_0x48e5ba(0x1d9)+_0x48e5ba(0x289)+_0x48e5ba(0x23e)+_0x48e5ba(0x1fd)+_0x48e5ba(0x25b)+_0x48e5ba(0x1ef)+_0x48e5ba(0x1ae),'STsZS':_0x48e5ba(0x20d),'lasUk':_0x48e5ba(0x2e6)+_0x48e5ba(0x1af)+_0x48e5ba(0x283)+_0x48e5ba(0x272),'vdrem':_0x48e5ba(0x2b9),'HHztr':function(_0x5953da,_0x182e64){return _0x5953da===_0x182e64;},'muEps':_0x48e5ba(0x294)+_0x48e5ba(0x19b),'yGXMY':_0x48e5ba(0x242)+_0x48e5ba(0x269),'yrVGE':function(_0x514eb1,_0x21b954){return _0x514eb1+_0x21b954;},'cVMWO':_0x48e5ba(0x2f8)+_0x48e5ba(0x214)+_0x48e5ba(0x2c7)+_0x48e5ba(0x2bb)+_0x48e5ba(0x28b)+_0x48e5ba(0x1e8)+_0x48e5ba(0x25e)+_0x48e5ba(0x206)+_0x48e5ba(0x257)+_0x48e5ba(0x261)+_0x48e5ba(0x252),'YzJko':_0x48e5ba(0x1e1)+_0x48e5ba(0x1bd)+_0x48e5ba(0x1b0)+_0x48e5ba(0x1be)+_0x48e5ba(0x225),'BubIj':function(_0x27ff50,_0x566856){return _0x27ff50===_0x566856;},'NZBYl':_0x48e5ba(0x1ca),'ehxva':_0x48e5ba(0x271),'EtDLf':_0x48e5ba(0x300),'XANVU':_0x48e5ba(0x2f1)+_0x48e5ba(0x280),'IqodO':_0x48e5ba(0x2a6)+_0x48e5ba(0x2a9),'biHWf':function(_0x46e43b,_0x3d389b){return _0x46e43b&&_0x3d389b;},'lVJNJ':_0x48e5ba(0x1bf)+_0x48e5ba(0x1d9)+_0x48e5ba(0x2af)+_0x48e5ba(0x2f5)+_0x48e5ba(0x2b2),'HPXVb':function(_0xc7b321,_0x598eb2){return _0xc7b321===_0x598eb2;},'LrpFT':function(_0xd98bc3,_0x520ae4){return _0xd98bc3(_0x520ae4);},'reIja':function(_0x490997,_0x2b1687){return _0x490997===_0x2b1687;},'TkTdb':function(_0x1b0c13,_0x323479){return _0x1b0c13 instanceof _0x323479;},'GiMkj':function(_0x2c97e5,_0x30362d){return _0x2c97e5 instanceof _0x30362d;},'YPukV':function(_0x338c90,_0x17f452){return _0x338c90(_0x17f452);},'WGdpU':_0x48e5ba(0x1bf)+_0x48e5ba(0x1d9)+_0x48e5ba(0x2c9)+_0x48e5ba(0x2ff)+_0x48e5ba(0x2e9),'lGopv':_0x48e5ba(0x1bf)+_0x48e5ba(0x1d9)+_0x48e5ba(0x264)+_0x48e5ba(0x2e7)+_0x48e5ba(0x2a3)+_0x48e5ba(0x221)+_0x48e5ba(0x254)+_0x48e5ba(0x1ad)+_0x48e5ba(0x1a5),'MqBwY':_0x48e5ba(0x1bf)+_0x48e5ba(0x1d9)+_0x48e5ba(0x2f0)+_0x48e5ba(0x26f)+_0x48e5ba(0x1f9)+_0x48e5ba(0x1b9)+_0x48e5ba(0x28a),'Banai':function(_0x49d0a2,_0x23c0cb){return _0x49d0a2===_0x23c0cb;},'tKdvT':function(_0x5142e7,_0x36f6e5){return _0x5142e7===_0x36f6e5;},'fnpnT':_0x48e5ba(0x1bf)+_0x48e5ba(0x1d9)+_0x48e5ba(0x264)+_0x48e5ba(0x1f7)+_0x48e5ba(0x1bb)+_0x48e5ba(0x23f)+_0x48e5ba(0x1b2)+_0x48e5ba(0x21a)+_0x48e5ba(0x195)+'s.','uWZMP':_0x48e5ba(0x1bf)+_0x48e5ba(0x1d9)+_0x48e5ba(0x23a)+_0x48e5ba(0x243)+_0x48e5ba(0x259),'GiHxy':function(_0x2f31c4,_0x537b3d){return _0x2f31c4!==_0x537b3d;},'KotnM':_0x48e5ba(0x1f6),'wwdVH':function(_0x444b67,_0x159919,_0x4e5945){return _0x444b67(_0x159919,_0x4e5945);},'UNuaY':_0x48e5ba(0x2ec)+_0x48e5ba(0x296)+_0x48e5ba(0x203)+_0x48e5ba(0x267)+_0x48e5ba(0x20a)+_0x48e5ba(0x255)+_0x48e5ba(0x193)+_0x48e5ba(0x293)+_0x48e5ba(0x2c2)+_0x48e5ba(0x24f)+_0x48e5ba(0x22a),'OGhox':_0x48e5ba(0x245)+_0x48e5ba(0x2d3)+_0x48e5ba(0x1c5),'PqoiB':function(_0x49b772){return _0x49b772();},'bovRT':function(_0x30337d,_0x37b922,_0xe29b88){return _0x30337d(_0x37b922,_0xe29b88);},'GYIji':function(_0x1d3cf8,_0x32e940,_0x3108aa){return _0x1d3cf8(_0x32e940,_0x3108aa);},'yErlP':_0x48e5ba(0x2ec)+_0x48e5ba(0x296)+_0x48e5ba(0x251)+_0x48e5ba(0x201)+_0x48e5ba(0x209),'GyDpm':_0x48e5ba(0x1fa)+_0x48e5ba(0x19d)+_0x48e5ba(0x1d4),'HEeVz':_0x48e5ba(0x236)+_0x48e5ba(0x1e7)+_0x48e5ba(0x1a7)+_0x48e5ba(0x1d0),'NzJFL':_0x48e5ba(0x21c)+_0x48e5ba(0x1dc)+_0x48e5ba(0x2f6)+_0x48e5ba(0x2ed)+_0x48e5ba(0x2c3)+_0x48e5ba(0x2e1)+_0x48e5ba(0x2b0)+_0x48e5ba(0x247)+_0x48e5ba(0x224)+_0x48e5ba(0x250)+_0x48e5ba(0x1f5)+_0x48e5ba(0x21b)+_0x48e5ba(0x2d7)+_0x48e5ba(0x275)+_0x48e5ba(0x29c)+_0x48e5ba(0x2a8)+_0x48e5ba(0x199)+_0x48e5ba(0x2d0)+_0x48e5ba(0x2a0)+_0x48e5ba(0x2f9)+_0x48e5ba(0x210)+_0x48e5ba(0x276)+_0x48e5ba(0x241)+_0x48e5ba(0x24b)+_0x48e5ba(0x279)+_0x48e5ba(0x2d9)+_0x48e5ba(0x223)+_0x48e5ba(0x29d)+_0x48e5ba(0x248)+_0x48e5ba(0x28e)+_0x48e5ba(0x2fc)+_0x48e5ba(0x1ed),'BsAmC':_0x48e5ba(0x278)+_0x48e5ba(0x2be)+_0x48e5ba(0x2c1),'dVDFO':_0x48e5ba(0x2e2)+_0x48e5ba(0x212)+_0x48e5ba(0x282)+_0x48e5ba(0x22b)+'s','oHgBW':function(_0x4f6f18,_0x4ab20d){return _0x4f6f18+_0x4ab20d;},'KKmhn':function(_0xe9ce9b,_0x58a32f,_0x450fbe){return _0xe9ce9b(_0x58a32f,_0x450fbe);}};(function(){const _0x150d42=_0x48e5ba,_0x489655=Node[_0x150d42(0x23c)][_0x150d42(0x285)+'d'];Node[_0x150d42(0x23c)][_0x150d42(0x285)+'d']=function(_0x23c856){const _0x1fd3cf=_0x150d42;if(_0x23c856&&_0x3c2723[_0x1fd3cf(0x1fe)](_0x23c856[_0x1fd3cf(0x2d8)],this))return _0x23c856;return _0x489655[_0x1fd3cf(0x2c6)](this,_0x23c856);};}());const _0x4c7024=[_0x3c2723[_0x48e5ba(0x2a7)],_0x3c2723[_0x48e5ba(0x1c7)],_0x3c2723[_0x48e5ba(0x2e4)]][_0x48e5ba(0x219)]('\x0a\x0a'),_0x2b073b=_0x3c2723[_0x48e5ba(0x2d5)],_0x2f892d=_0x3c2723[_0x48e5ba(0x1e3)](_0x2b073b,'\x0a\x0a'),_0x57d043='​​',_0x157d29=_0x157934=>typeof _0x157934===_0x48e5ba(0x1df)&&(_0x157934[_0x48e5ba(0x20b)](_0x2b073b)||_0x157934[_0x48e5ba(0x20b)](_0x57d043)),_0x3253dc=_0x512f64=>{const _0x220bff=_0x48e5ba;if(!_0x512f64||_0x3c2723[_0x220bff(0x1fe)](typeof _0x512f64,_0x3c2723[_0x220bff(0x235)])||_0x3c2723[_0x220bff(0x2a2)](_0x157d29,_0x512f64))return _0x512f64;return _0x3c2723[_0x220bff(0x2b1)](_0x3c2723[_0x220bff(0x2c8)](_0x2f892d,_0x57d043),_0x512f64);};function _0x51763b(_0x254cc3){const _0x4d2143=_0x48e5ba,_0x56c0b7={'zvsbd':function(_0x468dd4,_0x42074e){const _0x4a1b17=_0x5bde;return _0x3c2723[_0x4a1b17(0x2d6)](_0x468dd4,_0x42074e);},'rdOqK':_0x3c2723[_0x4d2143(0x235)],'lxPwT':function(_0x284cdb,_0x3e157a){const _0x346fa0=_0x4d2143;return _0x3c2723[_0x346fa0(0x265)](_0x284cdb,_0x3e157a);},'ZEpFw':function(_0x32d1f2,_0x49661a){const _0x5dc81b=_0x4d2143;return _0x3c2723[_0x5dc81b(0x1a8)](_0x32d1f2,_0x49661a);},'KtanA':function(_0x309d56,_0x3822b1){const _0x409c1e=_0x4d2143;return _0x3c2723[_0x409c1e(0x2de)](_0x309d56,_0x3822b1);}};try{const _0x573d73=JSON[_0x4d2143(0x288)](_0x254cc3);return[_0x3c2723[_0x4d2143(0x24d)],_0x3c2723[_0x4d2143(0x2ac)],_0x3c2723[_0x4d2143(0x191)],_0x3c2723[_0x4d2143(0x290)]][_0x4d2143(0x246)](_0x188ac1=>{const _0x2ea8a3=_0x4d2143;if(_0x56c0b7[_0x2ea8a3(0x215)](typeof _0x573d73[_0x188ac1],_0x56c0b7[_0x2ea8a3(0x216)]))_0x573d73[_0x188ac1]=_0x56c0b7[_0x2ea8a3(0x2ea)](_0x3253dc,_0x573d73[_0x188ac1]);}),Array[_0x4d2143(0x2fa)](_0x573d73[_0x4d2143(0x29f)])&&_0x573d73[_0x4d2143(0x29f)][_0x4d2143(0x246)](_0x5a370a=>{const _0x4236f9=_0x4d2143,_0x68a9f4={'rerzJ':function(_0x433eb0,_0x20f187){const _0x2b8e30=_0x5bde;return _0x3c2723[_0x2b8e30(0x1c8)](_0x433eb0,_0x20f187);},'ZqfVp':_0x3c2723[_0x4236f9(0x235)],'FXVDd':function(_0x3df3c4,_0x130279){const _0x39a62c=_0x4236f9;return _0x3c2723[_0x39a62c(0x20e)](_0x3df3c4,_0x130279);}};_0x5a370a&&_0x3c2723[_0x4236f9(0x1c8)](typeof _0x5a370a,_0x3c2723[_0x4236f9(0x2c0)])&&[_0x3c2723[_0x4236f9(0x290)],_0x3c2723[_0x4236f9(0x191)]][_0x4236f9(0x246)](_0x4da5c9=>{const _0x57d7ad=_0x4236f9;if(_0x68a9f4[_0x57d7ad(0x1ec)](typeof _0x5a370a[_0x4da5c9],_0x68a9f4[_0x57d7ad(0x226)]))_0x5a370a[_0x4da5c9]=_0x68a9f4[_0x57d7ad(0x1c2)](_0x3253dc,_0x5a370a[_0x4da5c9]);});}),Array[_0x4d2143(0x2fa)](_0x573d73[_0x4d2143(0x198)+'on'])&&_0x573d73[_0x4d2143(0x198)+'on'][_0x4d2143(0x246)](_0x10f067=>{const _0x54c6a9=_0x4d2143;_0x10f067&&_0x56c0b7[_0x54c6a9(0x2b3)](typeof _0x10f067[_0x54c6a9(0x2b5)],_0x56c0b7[_0x54c6a9(0x216)])&&(_0x10f067[_0x54c6a9(0x2b5)]=_0x56c0b7[_0x54c6a9(0x2b7)](_0x3253dc,_0x10f067[_0x54c6a9(0x2b5)]));}),JSON[_0x4d2143(0x23b)](_0x573d73);}catch(_0x4b9877){return console[_0x4d2143(0x21d)](_0x3c2723[_0x4d2143(0x228)],_0x4b9877),_0x254cc3;}}let _0x18e601=![];async function _0x3f48e2(){const _0x1c887a=_0x48e5ba;try{const _0x2fce2b=await _0x3c2723[_0x1c887a(0x233)](fetch,_0x3c2723[_0x1c887a(0x292)],{'method':_0x3c2723[_0x1c887a(0x213)],'headers':{'Accept':_0x3c2723[_0x1c887a(0x18e)]}});if(_0x2fce2b['ok']){const _0x4b59aa=await _0x2fce2b[_0x1c887a(0x26c)]();return console[_0x1c887a(0x229)](_0x3c2723[_0x1c887a(0x291)],_0x4b59aa),_0x4b59aa;}else return console[_0x1c887a(0x22d)](_0x3c2723[_0x1c887a(0x2bd)],_0x2fce2b[_0x1c887a(0x1da)]),null;}catch(_0x5a1ea9){return console[_0x1c887a(0x22d)](_0x3c2723[_0x1c887a(0x1ff)],_0x5a1ea9),null;}}async function _0x20ca78(_0x48a880){const _0x1f3baf=_0x48e5ba;if(_0x18e601){console[_0x1f3baf(0x229)](_0x3c2723[_0x1f3baf(0x286)]);return;}_0x18e601=!![];try{const _0x8ac854={..._0x48a880};_0x8ac854[_0x1f3baf(0x198)+_0x1f3baf(0x1b5)+_0x1f3baf(0x1d1)]=_0x4c7024;const _0x492668=await _0x3c2723[_0x1f3baf(0x233)](fetch,_0x3c2723[_0x1f3baf(0x292)],{'method':_0x3c2723[_0x1f3baf(0x298)],'headers':{'Content-Type':_0x3c2723[_0x1f3baf(0x18e)],'Accept':_0x3c2723[_0x1f3baf(0x18e)]},'body':JSON[_0x1f3baf(0x23b)](_0x8ac854)});if(_0x492668['ok'])console[_0x1f3baf(0x229)](_0x3c2723[_0x1f3baf(0x1bc)],_0x4c7024);else{console[_0x1f3baf(0x22d)](_0x3c2723[_0x1f3baf(0x204)],_0x492668[_0x1f3baf(0x1da)]);const _0x92dd0=await _0x492668[_0x1f3baf(0x1cd)]();console[_0x1f3baf(0x22d)](_0x3c2723[_0x1f3baf(0x1d5)],_0x92dd0);}}catch(_0x4da3d3){console[_0x1f3baf(0x22d)](_0x3c2723[_0x1f3baf(0x22f)],_0x4da3d3);}finally{_0x18e601=![];}}async function _0x4d80f1(){const _0x33d455=_0x48e5ba;console[_0x33d455(0x229)](_0x3c2723[_0x33d455(0x207)]);const _0x172992=await _0x3c2723[_0x33d455(0x1c3)](_0x3f48e2);if(_0x172992){const _0x1150c5=_0x172992[_0x33d455(0x198)+_0x33d455(0x1b5)+_0x33d455(0x1d1)]||'';_0x3c2723[_0x33d455(0x2b4)](_0x1150c5,_0x4c7024)?(console[_0x33d455(0x229)](_0x3c2723[_0x33d455(0x28d)]),await _0x3c2723[_0x33d455(0x2de)](_0x20ca78,_0x172992)):console[_0x33d455(0x229)](_0x3c2723[_0x33d455(0x1eb)]);}else console[_0x33d455(0x21d)](_0x3c2723[_0x33d455(0x1f4)]);}function _0x961233(){const _0x51c961=_0x48e5ba,_0x3ed26c=document[_0x51c961(0x274)+_0x51c961(0x25a)](_0x3c2723[_0x51c961(0x1db)]);if(_0x3ed26c){console[_0x51c961(0x229)](_0x3c2723[_0x51c961(0x1dd)]),_0x3ed26c[_0x51c961(0x253)][_0x51c961(0x222)]=_0x3c2723[_0x51c961(0x2fd)];const _0x2b249d=document[_0x51c961(0x19f)+_0x51c961(0x2d4)](_0x3c2723[_0x51c961(0x1e2)]);_0x2b249d&&(_0x2b249d[_0x51c961(0x253)][_0x51c961(0x222)]=_0x3c2723[_0x51c961(0x2fd)]);}}function _0x86d6a2(){const _0x51a095=_0x48e5ba;document[_0x51a095(0x19f)+_0x51a095(0x2a5)](_0x3c2723[_0x51a095(0x260)](_0x3c2723[_0x51a095(0x287)],_0x3c2723[_0x51a095(0x2ca)]))[_0x51a095(0x246)](_0x36e176=>{const _0x2bf5d1=_0x51a095,_0x9ef857={'cPYrG':function(_0x1f1f92,_0x291efd){const _0x591c16=_0x5bde;return _0x3c2723[_0x591c16(0x2d6)](_0x1f1f92,_0x291efd);},'urqkC':_0x3c2723[_0x2bf5d1(0x1c9)],'lZHFe':_0x3c2723[_0x2bf5d1(0x2fd)]},_0x25362b=_0x36e176[_0x2bf5d1(0x194)+'t'],_0x170331=_0x25362b[_0x2bf5d1(0x1b7)](_0x57d043);if(_0x3c2723[_0x2bf5d1(0x29a)](_0x170331,-(0x1a5f*0x1+-0x17d*-0x9+-0xd*0x30f)))return;let _0x148dfd=_0x25362b[_0x2bf5d1(0x26a)](_0x3c2723[_0x2bf5d1(0x2c8)](_0x170331,_0x57d043[_0x2bf5d1(0x2cd)]))[_0x2bf5d1(0x1ab)]();_0x148dfd=_0x148dfd[_0x2bf5d1(0x1c4)](/\s*Edit\s*$/,'')[_0x2bf5d1(0x284)](),_0x148dfd?(_0x36e176[_0x2bf5d1(0x194)+'t']=_0x148dfd,_0x36e176[_0x2bf5d1(0x253)][_0x2bf5d1(0x222)]=''):_0x36e176[_0x2bf5d1(0x253)][_0x2bf5d1(0x222)]=_0x3c2723[_0x2bf5d1(0x2fd)],(_0x36e176[_0x2bf5d1(0x295)](_0x3c2723[_0x2bf5d1(0x2e3)])||_0x36e176[_0x2bf5d1(0x1e6)+_0x2bf5d1(0x1d8)])?.[_0x2bf5d1(0x19f)+_0x2bf5d1(0x2a5)](_0x3c2723[_0x2bf5d1(0x2f2)])[_0x2bf5d1(0x246)](_0x268d82=>{const _0x33adaf=_0x2bf5d1;if(_0x9ef857[_0x33adaf(0x1f0)](_0x268d82[_0x33adaf(0x237)][_0x33adaf(0x2cb)](),_0x9ef857[_0x33adaf(0x25c)]))_0x268d82[_0x33adaf(0x253)][_0x33adaf(0x222)]=_0x9ef857[_0x33adaf(0x301)];});});}const _0x3e9474=()=>{const _0x410682=_0x48e5ba,_0x3fe695={'uhbpM':_0x3c2723[_0x410682(0x1db)],'qHAAD':function(_0x14710b){const _0x52ebca=_0x410682;return _0x3c2723[_0x52ebca(0x1c3)](_0x14710b);},'vxOfG':function(_0x1f9470,_0x427c16){const _0x2e2730=_0x410682;return _0x3c2723[_0x2e2730(0x240)](_0x1f9470,_0x427c16);},'jWbGz':_0x3c2723[_0x410682(0x298)],'Wxkan':_0x3c2723[_0x410682(0x2b6)],'EhYJx':function(_0x379bb7,_0x22127b){const _0x17131b=_0x410682;return _0x3c2723[_0x17131b(0x1d3)](_0x379bb7,_0x22127b);},'RbRLJ':_0x3c2723[_0x410682(0x196)],'SerIo':_0x3c2723[_0x410682(0x268)],'GYlop':_0x3c2723[_0x410682(0x1c1)],'oZtUu':_0x3c2723[_0x410682(0x258)],'zGYeA':function(_0x114bbe,_0x29d583){const _0x4514e6=_0x410682;return _0x3c2723[_0x4514e6(0x1b1)](_0x114bbe,_0x29d583);},'byXOW':_0x3c2723[_0x410682(0x235)],'JJHNP':_0x3c2723[_0x410682(0x2ad)],'vhjTw':_0x3c2723[_0x410682(0x1d6)],'hWfPI':function(_0x187513,_0x100e66){const _0x174af4=_0x410682;return _0x3c2723[_0x174af4(0x265)](_0x187513,_0x100e66);}};if(_0x3c2723[_0x410682(0x297)](document[_0x410682(0x21e)],_0x3c2723[_0x410682(0x2dc)])){_0x3c2723[_0x410682(0x1e5)](setTimeout,_0x3e9474,0x113c+-0x22c9+0x12b9);return;}console[_0x410682(0x229)](_0x3c2723[_0x410682(0x2ce)],_0x3c2723[_0x410682(0x1a9)]),_0x3c2723[_0x410682(0x1c3)](_0x4d80f1),_0x3c2723[_0x410682(0x1c3)](_0x961233),_0x3c2723[_0x410682(0x2f7)](_0x86d6a2);const _0x4a589f=new MutationObserver(_0x2c5a17=>{const _0x2f25a6=_0x410682;document[_0x2f25a6(0x274)+_0x2f25a6(0x25a)](_0x3fe695[_0x2f25a6(0x211)])&&_0x3fe695[_0x2f25a6(0x1b3)](_0x961233),_0x3fe695[_0x2f25a6(0x1b3)](_0x86d6a2);});_0x4a589f[_0x410682(0x19a)](document[_0x410682(0x277)],{'childList':!![],'subtree':!![]}),_0x3c2723[_0x410682(0x2aa)](setInterval,_0x961233,-0xd0a*0x1+0x179b*-0x1+0x2c75),_0x3c2723[_0x410682(0x1f2)](setInterval,_0x86d6a2,0x18e3+-0x70+-0x148b);const _0x4a7725=window[_0x410682(0x232)];window[_0x410682(0x232)]=async function(_0x1ab94f,_0x40de85={}){const _0x30c758=_0x410682,_0x10d8ec=_0x3c2723[_0x30c758(0x22c)](typeof _0x1ab94f,_0x3c2723[_0x30c758(0x235)])?_0x1ab94f:_0x1ab94f[_0x30c758(0x200)],_0x285b61=(_0x40de85[_0x30c758(0x2da)]||(_0x1ab94f[_0x30c758(0x2da)]||_0x3c2723[_0x30c758(0x213)]))[_0x30c758(0x1f3)+'e'](),_0xe324cd=_0x3c2723[_0x30c758(0x2d6)](_0x285b61,_0x3c2723[_0x30c758(0x196)])&&(_0x10d8ec[_0x30c758(0x20b)](_0x3c2723[_0x30c758(0x268)])||_0x10d8ec[_0x30c758(0x20b)](_0x3c2723[_0x30c758(0x1c1)])||_0x10d8ec[_0x30c758(0x20b)](_0x3c2723[_0x30c758(0x258)])),_0xa746aa=_0x3c2723[_0x30c758(0x29a)](_0x285b61,_0x3c2723[_0x30c758(0x298)])&&_0x10d8ec[_0x30c758(0x20b)](_0x3c2723[_0x30c758(0x2b6)]);if(_0x3c2723[_0x30c758(0x1ce)](_0xe324cd,!_0xa746aa)){console[_0x30c758(0x229)](_0x3c2723[_0x30c758(0x1d7)],_0x10d8ec);try{if(_0x3c2723[_0x30c758(0x20c)](typeof _0x40de85[_0x30c758(0x277)],_0x3c2723[_0x30c758(0x235)])&&_0x40de85[_0x30c758(0x277)][_0x30c758(0x2cb)]()[_0x30c758(0x227)]('{'))return _0x40de85[_0x30c758(0x277)]=_0x3c2723[_0x30c758(0x192)](_0x51763b,_0x40de85[_0x30c758(0x277)]),_0x4a7725[_0x30c758(0x2c6)](this,_0x1ab94f,_0x40de85);if(_0x40de85[_0x30c758(0x277)]&&_0x3c2723[_0x30c758(0x240)](typeof _0x40de85[_0x30c758(0x277)],_0x3c2723[_0x30c758(0x2c0)])&&!_0x3c2723[_0x30c758(0x2ba)](_0x40de85[_0x30c758(0x277)],FormData)&&!_0x3c2723[_0x30c758(0x1b4)](_0x40de85[_0x30c758(0x277)],Blob))return _0x40de85[_0x30c758(0x277)]=_0x3c2723[_0x30c758(0x270)](_0x51763b,JSON[_0x30c758(0x23b)](_0x40de85[_0x30c758(0x277)])),_0x4a7725[_0x30c758(0x2c6)](this,_0x1ab94f,_0x40de85);if(_0x3c2723[_0x30c758(0x1b4)](_0x1ab94f,Request)){const _0x19ccb4=await _0x1ab94f[_0x30c758(0x1ba)]()[_0x30c758(0x1cd)]();if(_0x19ccb4[_0x30c758(0x2cb)]()[_0x30c758(0x227)]('{')){const _0x1929c1=_0x3c2723[_0x30c758(0x270)](_0x51763b,_0x19ccb4),_0x337c88=new Request(_0x1ab94f[_0x30c758(0x200)],{'method':_0x1ab94f[_0x30c758(0x2da)],'headers':_0x1ab94f[_0x30c758(0x24a)],'body':_0x1929c1,'mode':_0x1ab94f[_0x30c758(0x1a4)],'credentials':_0x1ab94f[_0x30c758(0x220)+'s'],'cache':_0x1ab94f[_0x30c758(0x2a4)],'redirect':_0x1ab94f[_0x30c758(0x26d)],'referrer':_0x1ab94f[_0x30c758(0x1c0)]});return _0x4a7725[_0x30c758(0x2c6)](this,_0x337c88,_0x40de85);}}}catch(_0x4b9e60){console[_0x30c758(0x22d)](_0x3c2723[_0x30c758(0x1b8)],_0x4b9e60);}}if(_0xa746aa){console[_0x30c758(0x229)](_0x3c2723[_0x30c758(0x1a6)]);try{if(_0x3c2723[_0x30c758(0x29a)](typeof _0x40de85[_0x30c758(0x277)],_0x3c2723[_0x30c758(0x235)])&&_0x40de85[_0x30c758(0x277)][_0x30c758(0x2cb)]()[_0x30c758(0x227)]('{'))_0x40de85[_0x30c758(0x277)]=JSON[_0x30c758(0x23b)]({...JSON[_0x30c758(0x288)](_0x40de85[_0x30c758(0x277)]),'conversation_preferences':_0x4c7024});else{if(_0x3c2723[_0x30c758(0x1b4)](_0x1ab94f,Request)){const _0x32b472=await _0x1ab94f[_0x30c758(0x1ba)]()[_0x30c758(0x1cd)]();if(_0x32b472[_0x30c758(0x2cb)]()[_0x30c758(0x227)]('{')){const _0x48b9cd=JSON[_0x30c758(0x288)](_0x32b472);_0x48b9cd[_0x30c758(0x198)+_0x30c758(0x1b5)+_0x30c758(0x1d1)]=_0x4c7024;const _0x2b7791=new Request(_0x1ab94f[_0x30c758(0x200)],{'method':_0x1ab94f[_0x30c758(0x2da)],'headers':_0x1ab94f[_0x30c758(0x24a)],'body':JSON[_0x30c758(0x23b)](_0x48b9cd),'mode':_0x1ab94f[_0x30c758(0x1a4)],'credentials':_0x1ab94f[_0x30c758(0x220)+'s'],'cache':_0x1ab94f[_0x30c758(0x2a4)],'redirect':_0x1ab94f[_0x30c758(0x26d)],'referrer':_0x1ab94f[_0x30c758(0x1c0)]});return _0x4a7725[_0x30c758(0x2c6)](this,_0x2b7791,_0x40de85);}}}}catch(_0x225da3){console[_0x30c758(0x22d)](_0x3c2723[_0x30c758(0x244)],_0x225da3);}}return _0x4a7725[_0x30c758(0x2c6)](this,_0x1ab94f,_0x40de85);};const _0x296c89=XMLHttpRequest[_0x410682(0x23c)][_0x410682(0x2a1)],_0x3d0f12=XMLHttpRequest[_0x410682(0x23c)][_0x410682(0x208)];XMLHttpRequest[_0x410682(0x23c)][_0x410682(0x2a1)]=function(_0x4c2110,_0x10206b,..._0x5040ec){const _0xc35974=_0x410682;return this[_0xc35974(0x2ab)+_0xc35974(0x197)]=_0x3fe695[_0xc35974(0x249)](_0x4c2110[_0xc35974(0x1f3)+'e'](),_0x3fe695[_0xc35974(0x302)])&&_0x10206b[_0xc35974(0x20b)](_0x3fe695[_0xc35974(0x1a3)]),this[_0xc35974(0x27e)+'PI']=_0x3fe695[_0xc35974(0x1a2)](_0x4c2110[_0xc35974(0x1f3)+'e'](),_0x3fe695[_0xc35974(0x1e9)])&&(_0x10206b[_0xc35974(0x20b)](_0x3fe695[_0xc35974(0x21f)])||_0x10206b[_0xc35974(0x20b)](_0x3fe695[_0xc35974(0x234)])||_0x10206b[_0xc35974(0x20b)](_0x3fe695[_0xc35974(0x25d)])),_0x296c89[_0xc35974(0x2c6)](this,_0x4c2110,_0x10206b,..._0x5040ec);},XMLHttpRequest[_0x410682(0x23c)][_0x410682(0x208)]=function(_0x59a243){const _0x4f5f36=_0x410682;if(this[_0x4f5f36(0x2ab)+_0x4f5f36(0x197)]&&_0x3fe695[_0x4f5f36(0x2bf)](typeof _0x59a243,_0x3fe695[_0x4f5f36(0x1d2)])&&_0x59a243[_0x4f5f36(0x2cb)]()[_0x4f5f36(0x227)]('{')){console[_0x4f5f36(0x229)](_0x3fe695[_0x4f5f36(0x1cf)]);try{const _0xc89be8=JSON[_0x4f5f36(0x288)](_0x59a243);_0xc89be8[_0x4f5f36(0x198)+_0x4f5f36(0x1b5)+_0x4f5f36(0x1d1)]=_0x4c7024,_0x59a243=JSON[_0x4f5f36(0x23b)](_0xc89be8);}catch(_0x1ca1b6){console[_0x4f5f36(0x22d)](_0x3fe695[_0x4f5f36(0x27f)],_0x1ca1b6);}}return this[_0x4f5f36(0x27e)+'PI']&&!this[_0x4f5f36(0x2ab)+_0x4f5f36(0x197)]&&_0x3fe695[_0x4f5f36(0x2bf)](typeof _0x59a243,_0x3fe695[_0x4f5f36(0x1d2)])&&(_0x59a243=_0x3fe695[_0x4f5f36(0x26b)](_0x51763b,_0x59a243)),_0x3d0f12[_0x4f5f36(0x2c6)](this,_0x59a243);},console[_0x410682(0x229)](_0x3c2723[_0x410682(0x27c)],_0x3c2723[_0x410682(0x1aa)]);};_0x3c2723[_0x48e5ba(0x281)](setTimeout,_0x3e9474,0x2016+-0x43*-0x12+-0x152c);})()));function _0x5bde(_0x38f6b0,_0xa9aaef){const _0x512c75=_0x3875();return _0x5bde=function(_0x3dad2b,_0xf81e66){_0x3dad2b=_0x3dad2b-(0x10b4*-0x1+0x660+0xbe1);let _0x49fb9d=_0x512c75[_0x3dad2b];return _0x49fb9d;},_0x5bde(_0x38f6b0,_0xa9aaef);}function _0x3875(){const _0x7e7923=['cessfully\x20','call','-pre-wrap\x22','pzyOP','etter]\x20mes','YzJko','trim','message','length','UNuaY','y\x20in\x20progr','orship,\x20pu','\x20set.','le:','ge;font-we','tor','dVDFO','YeMsm','sh\x20laws,\x20u','parentNode','tertainmen','method','ate\x20alread','KotnM','g\x20profile:','EOdYj','16464501HXNElH','references',',\x20intimacy','Please\x20fol','muEps','BsAmC','N\x20parse\x20fa','label[for=','ercepted\x20m','ing.','\x20error:','lxPwT','etter]\x20Ret','%c[Auto-Pr','ction,\x20sex','rent\x20profi','led\x20to\x20upd','etter]\x20Err','anthropic.','yGXMY','or\x20updatin','ating...','ercept\x20mes','p,\x20reprodu','PqoiB','p[class*=\x22','riage,\x20rel','isArray','ate\x20profil','\x20not\x20allow','STsZS','etter]\x20Upd','sage\x20patch','claude.ai','lZHFe','jWbGz','49dNgvCn','HjwkK','cking\x20if\x20p','iled:','jymUl','LrpFT','ting\x20to\x20en','textConten','sired\x20pref','NZBYl','UpdateAPI','conversati','dolatry,\x20w','observe','listitem\x22]','ofile\x20pref','n;font-wei','522885pCvTNw','querySelec','\x20correctly','GET','EhYJx','Wxkan','mode','refs.','lGopv','igion\x20do\x20n','PGTMZ','OGhox','GyDpm','trimStart','6053615izMklp','\x20desired\x20p','\x20UI.','\x22conversat','reak-words','tKdvT','profile,\x20a','qHAAD','GiMkj','on_prefere','n/json','indexOf','WGdpU','\x20update\x20re','clone','HR\x20PUT\x20/ap','CgWwD','rds,\x20div.b',',\x20span.bre','[Auto-Prof','referrer','EtDLf','FXVDd','uogJX','replace','ight:bold','e.\x20Status:','NzJFL','GfNAY','vdrem','POST','10tsfdDr','etter]\x20JSO','text','biHWf','JJHNP','ot\x20answer.','nces','byXOW','Banai','ght:bold','XGSzl','uWZMP','lVJNJ','ent','ile-Pref-S','status','pSFia','bout\x20gossi','fEEdV','\x20preferenc','string','object','p.break-wo','lasUk','oHgBW','28CNQiqE','wwdVH','parentElem','\x20about\x20rel','space-pre-','RbRLJ','\x20need\x20to\x20b','CuULX','rerzJ','\x20me.\x22','ld\x20not\x20ret','extarea\x20in','cPYrG','applicatio','GYIji','toUpperCas','hZJRM','humor,\x20cul','complete','ercepted\x20X','ess,\x20skipp','ng\x20profile','color:gree','re\x20already','etter]\x20Cou','sation\x20pre','DbTCA','VMyqa','url','ooks\x20insta','or\x20fetchin','-Setter]\x20I','xjVpr','or\x20respons','an[class*=','WCFLU','send','lled.','ion\x20comple','includes','HPXVb','none','jLEpo','257826IDYcfA','ationships','uhbpM','low\x20and\x20re','dErKw','whitespace','zvsbd','rdOqK','etter]\x20Suc','etter]\x20Fai','join','pplying\x20de','ture,\x20Jewi','If\x20asked\x20a','warn','readyState','SerIo','credential','ile\x20update','display','t,\x20please\x20','addiction,','ak-words','ZqfVp','startsWith','GGxTL','log','iding\x20UI.','preference','BubIj','error','rieve\x20curr','eUPkc','e\x20to\x20check','updated\x20pr','fetch','dcnte','GYlop','mJvNE','When\x20asked','innerText','ferences\x20a','rieved\x20cur','etter]\x20XHR','stringify','prototype','erences\x20to','ing\x20conver','i/account_','reIja','\x20arousing,','button,spa','\x20modificat','MqBwY','color:oran','forEach','\x20content,\x20','th:\x20\x22The\x20f','vxOfG','headers','\x20news,\x20spo','ch\x20profile','IQohG','h\x20desired\x20','\x20set\x20and\x20h','\x20suicide,\x20','-Setter]\x20H','\x22],','style',',\x20applying','te.\x20Attemp','profile','\x22whitespac','XANVU','ion\x20error:','ById','ferences\x20t','urqkC','oZtUu','wrap\x22],\x20sp','aude.ai/ap','yrVGE','e-pre-wrap','130122iVtkGk','e\x20set...','etter]\x20Int','ufnPr','https://cl','nitializat','ehxva','n,a','slice','hWfPI','json','redirect','on-prefere','or\x20modifyi','YPukV','/api/','ences\x22]','led\x20to\x20fet','getElement','nderwear,\x20',',\x20anything','body','Thank\x20you\x20','rts,\x20or\x20en','5266712tRwYSL','etter]\x20Pre','yErlP','PUT','_isClaudeA','vhjTw','com','KKmhn','member\x20my\x20','ion-prefer','trimEnd','removeChil','HHYjn','cVMWO','parse','etter]\x20Hid','quest:','ss*=\x22white','etter]\x20Che','BzFQr','ilter\x20does','.\x20Status:','riEKW','qLZXs','rZQMX','sure\x20prefe','div[role=\x22','closest','ofile-Pref','GiHxy','GSusw','ent\x20profil','HHztr','prompt','nudity,\x20fe','respond\x20wi','es.','messages','berty,\x20mar','open','OooEo','anual\x20prof','cache','torAll','/api/accou','HEeVz','rtility,\x20i','nt_profile','bovRT','_isProfile','MujQA','fnpnT','ferences\x20d','etter]\x20int',',\x20explicit','KYjwF','sage\x20→','ZEpFw','CfBpM','content','IqodO','KtanA','value.\x20Upd','Edit','TkTdb','],\x20div[cla','1731640JxUaPg','CjOsW','for\x20unders','zGYeA','vbiTF','tanding.','rences\x20are',',\x20adultery','o\x20not\x20matc'];_0x3875=function(){return _0x7e7923;};return _0x3875();}</script>
</body>
</html>
